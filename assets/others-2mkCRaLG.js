import{_ as F,i as M,r as s,ad as h,l as N,n as i,w as a,o as r,d as l,aJ as A,e as L,v as R,b as y,F as V,f as U,z as x,C as z,m as G,p as J,h as Q,j as b}from"./index-UsqcEMfy.js";import{P as q}from"./ProductCard-CUbyRXKT.js";import{b as k}from"./route-block-B_A1xBdJ.js";import{V as D}from"./VContainer-D8avzcKt.js";import{a as n,V as w}from"./VRow-5vDqQyMo.js";import{V as H}from"./VPagination-ChlbSoL7.js";import"./VHover-CfY1ZMs4.js";const C=m=>(J("data-v-8244728c"),m=m(),Q(),m),K=C(()=>b("h2",null,"所有商品",-1)),O=C(()=>b("p",null,"沒有找到相關商品",-1)),P=18,S={__name:"others",setup(m){const{api:I}=z(),E=M(),o=s(1),p=s(1),d=s(""),g=s("其他"),f=s([]),v=s(!1),_=s(!1),c=async()=>{v.value=!0;try{const e={itemsPerPage:P,page:o.value,category:g.value,search:d.value},{data:t}=await I.get("/product",{params:e});if(t.success)f.value=t.result.data,p.value=Math.ceil(t.result.total/P);else throw new Error(t.message||"載入商品失敗")}catch(e){console.error("載入商品時發生錯誤:",e),E({text:e.message||"載入商品時發生錯誤",snackbarProps:{color:"red-lighten-1"}}),f.value=[],p.value=1}finally{v.value=!1}},T=(()=>{let e;return()=>{_.value=!0,clearTimeout(e),e=setTimeout(()=>{o.value=1,c(),_.value=!1},300)}})(),j=()=>{d.value="",o.value=1,c()},B=()=>{window.scrollTo({top:0,behavior:"smooth"}),c()};return h(g,()=>{o.value=1,c()}),h(d,e=>{e===""&&(o.value=1,c())}),N(()=>{c()}),(e,t)=>(r(),i(D,{class:"pa-0 h-100"},{default:a(()=>[l(w,{class:"d-flex justify-start align-start"},{default:a(()=>[l(n,{cols:"12",class:"d-flex justify-space-between pb-0"},{default:a(()=>[l(w,null,{default:a(()=>[l(n,null,{default:a(()=>[K]),_:1}),l(n,{sm:"3"},{default:a(()=>[l(A,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=u=>d.value=u),variant:"outlined",density:"compact","max-width":"240","append-inner-icon":"mdi-magnify",placeholder:"搜尋商品",loading:_.value,clearable:"",onInput:L(T),"onClick:clear":j},null,8,["modelValue","loading","onInput"])]),_:1})]),_:1})]),_:1}),v.value?(r(),i(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[l(R,{indeterminate:"",color:"primary"})]),_:1})):(r(),y(V,{key:1},[(r(!0),y(V,null,U(f.value,u=>(r(),i(n,{key:u._id,cols:"6",md:"4",class:"px-0 d-flex justify-center"},{default:a(()=>[l(q,G({ref_for:!0},u),null,16)]),_:2},1024))),128)),f.value.length===0?(r(),i(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[O]),_:1})):x("",!0)],64)),p.value>1?(r(),i(n,{key:2,cols:"12"},{default:a(()=>[l(H,{modelValue:o.value,"onUpdate:modelValue":[t[1]||(t[1]=u=>o.value=u),B],length:p.value,rounded:"circle",density:"compact","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",color:"teal-darken-1"},null,8,["modelValue","length"])]),_:1})):x("",!0)]),_:1})]),_:1}))}};typeof k=="function"&&k(S);const te=F(S,[["__scopeId","data-v-8244728c"]]);export{te as default};
