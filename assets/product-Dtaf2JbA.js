import{D as Ge,aP as Je,aU as Ye,P as Ze,G as Qe,T as el,r as x,a7 as ie,al as ze,c as $,U as ll,aV as al,ad as de,ap as Ee,aW as tl,H as ol,aK as me,d as t,F as G,az as nl,m as oe,aX as sl,V as he,aY as ul,ar as rl,g as D,aZ as il,a_ as dl,a$ as cl,b0 as vl,b1 as ml,_ as fl,i as pl,a as gl,b as be,w as i,B as Re,C as bl,o as K,I as O,ax as Ie,aL as yl,t as Pe,j as De,f as $e,n as ye,z as Fe,e as v,aM as Vl,q as Te,x as Be,A as Le,aN as Ne,s as Ke,v as hl,p as xl,h as kl}from"./index-E3rJh7GU.js";import{c as wl,a as ce,d as Cl,e as Oe,f as Sl,u as Il,b as W}from"./vee-validate.esm-rvd_hgiu.js";import{b as je}from"./route-block-B_A1xBdJ.js";import{V as Pl}from"./VContainer-DDCMf0Js.js";import{V as _e,a as Ve}from"./VRow-WU7Vo3T5.js";import{V as Fl}from"./VDataTableServer-CwnTC6DG.js";import{V as _l}from"./VForm-BjbIa6Xm.js";import{m as Dl,u as Al,V as Ml,a as Ul}from"./VSelect-DKVymev-.js";import{m as zl,u as El}from"./filter-Crtlqrj4.js";import{u as Rl,t as ve,V as $l,a as qe}from"./VList-CTDYhTnO.js";import{c as Tl}from"./VCheckboxBtn-BzesszTr.js";import{V as Bl}from"./VChip-Czq8boz1.js";import{V as Ll}from"./VCheckbox-BUWM6j36.js";import{V as Nl}from"./VTextarea-BGVBe0D3.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VDataTable-BiseJGKi.js";import"./VPagination-DbDhMt7L.js";import"./VDivider-Cj8L7O3G.js";function Kl(e,S,T){if(S==null)return e;if(Array.isArray(S))throw new Error("Multiple matches is not implemented");return typeof S=="number"&&~S?t(G,null,[t("span",{class:"v-combobox__unmask"},[e.substr(0,S)]),t("span",{class:"v-combobox__mask"},[e.substr(S,T)]),t("span",{class:"v-combobox__unmask"},[e.substr(S+T)])]):e}const Ol=Ge({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...zl({filterKeys:["title"]}),...Dl({hideNoData:!0,returnObject:!0}),...Je(Ye({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...Ze({transition:!1})},"VCombobox"),Xe=Qe()({name:"VCombobox",props:Ol(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:search":e=>!0,"update:menu":e=>!0},setup(e,S){var Ae;let{emit:T,slots:d}=S;const{t:y}=el(),I=x(),V=ie(!1),z=ie(!0),j=ie(!1),fe=x(),J=x(),ne=ze(e,"menu"),f=$({get:()=>ne.value,set:a=>{var n;ne.value&&!a&&((n=fe.value)!=null&&n.ΨopenChildren.size)||(ne.value=a)}}),m=ie(-1);let se=!1;const xe=$(()=>{var a;return(a=I.value)==null?void 0:a.color}),F=$(()=>f.value?e.closeText:e.openText),{items:ke,transformIn:Y,transformOut:Z}=Rl(e),{textColorClasses:Q,textColorStyles:ee}=ll(xe),u=ze(e,"modelValue",[],a=>Y(cl(a)),a=>{const n=Z(a);return e.multiple?n:n[0]??null}),E=al(),L=$(()=>!!(e.chips||d.chip)),h=$(()=>L.value||!!d.selection),w=ie(!e.multiple&&!h.value?((Ae=u.value[0])==null?void 0:Ae.title)??"":""),p=$({get:()=>w.value,set:a=>{var n;if(w.value=a??"",!e.multiple&&!h.value&&(u.value=[ve(e,a)]),a&&e.multiple&&((n=e.delimiters)!=null&&n.length)){const b=a.split(new RegExp(`(?:${e.delimiters.join("|")})+`));b.length>1&&(b.forEach(s=>{s=s.trim(),s&&g(ve(e,s))}),w.value="")}a||(m.value=-1),z.value=!a}}),we=$(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:e.multiple?u.value.length:p.value.length);de(w,a=>{se?Ee(()=>se=!1):V.value&&!f.value&&(f.value=!0),T("update:search",a)}),de(u,a=>{var n;!e.multiple&&!h.value&&(w.value=((n=a[0])==null?void 0:n.title)??"")});const{filteredItems:N,getMatches:le}=El(e,ke,()=>z.value?"":p.value),C=$(()=>e.hideSelected?N.value.filter(a=>!u.value.some(n=>n.value===a.value)):N.value),ue=$(()=>u.value.map(a=>a.value)),re=$(()=>{var n;return(e.autoSelectFirst===!0||e.autoSelectFirst==="exact"&&p.value===((n=C.value[0])==null?void 0:n.title))&&C.value.length>0&&!z.value&&!j.value}),q=$(()=>e.hideNoData&&!C.value.length||e.readonly||(E==null?void 0:E.isReadonly.value)),ae=x(),te=Al(ae,I);function B(a){se=!0,e.openOnClear&&(f.value=!0)}function Ce(){q.value||(f.value=!0)}function r(a){q.value||(V.value&&(a.preventDefault(),a.stopPropagation()),f.value=!f.value)}function o(a){var n;vl(a)&&((n=I.value)==null||n.focus())}function k(a){var s;if(ml(a)||e.readonly||E!=null&&E.isReadonly.value)return;const n=I.value.selectionStart,b=u.value.length;if((m.value>-1||["Enter","ArrowDown","ArrowUp"].includes(a.key))&&a.preventDefault(),["Enter","ArrowDown"].includes(a.key)&&(f.value=!0),["Escape"].includes(a.key)&&(f.value=!1),["Enter","Escape","Tab"].includes(a.key)&&(re.value&&["Enter","Tab"].includes(a.key)&&!u.value.some(c=>{let{value:U}=c;return U===C.value[0].value})&&g(N.value[0]),z.value=!0),a.key==="ArrowDown"&&re.value&&((s=ae.value)==null||s.focus("next")),a.key==="Enter"&&p.value&&(g(ve(e,p.value)),h.value&&(w.value="")),["Backspace","Delete"].includes(a.key)){if(!e.multiple&&h.value&&u.value.length>0&&!p.value)return g(u.value[0],!1);if(~m.value){const c=m.value;g(u.value[m.value],!1),m.value=c>=b-1?b-2:c}else a.key==="Backspace"&&!p.value&&(m.value=b-1)}if(e.multiple){if(a.key==="ArrowLeft"){if(m.value<0&&n>0)return;const c=m.value>-1?m.value-1:b-1;u.value[c]?m.value=c:(m.value=-1,I.value.setSelectionRange(p.value.length,p.value.length))}if(a.key==="ArrowRight"){if(m.value<0)return;const c=m.value+1;u.value[c]?m.value=c:(m.value=-1,I.value.setSelectionRange(0,0))}}}function l(){var a;e.eager&&((a=J.value)==null||a.calculateVisibleItems())}function A(){var a;V.value&&(z.value=!0,(a=I.value)==null||a.focus())}function g(a){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!a||a.props.disabled))if(e.multiple){const b=u.value.findIndex(c=>e.valueComparator(c.value,a.value)),s=n??!~b;if(~b){const c=s?[...u.value,a]:[...u.value];c.splice(b,1),u.value=c}else s&&(u.value=[...u.value,a]);e.clearOnSelect&&(p.value="")}else{const b=n!==!1;u.value=b?[a]:[],w.value=b&&!h.value?a.title:"",Ee(()=>{f.value=!1,z.value=!0})}}function R(a){V.value=!0,setTimeout(()=>{j.value=!0})}function M(a){j.value=!1}function Se(a){(a==null||a===""&&!e.multiple&&!h.value)&&(u.value=[])}return de(V,(a,n)=>{if(!(a||a===n)&&(m.value=-1,f.value=!1,p.value)){if(e.multiple){g(ve(e,p.value));return}if(!h.value)return;u.value.some(b=>{let{title:s}=b;return s===p.value})?w.value="":g(ve(e,p.value))}}),de(f,()=>{if(!e.hideSelected&&f.value&&u.value.length){const a=C.value.findIndex(n=>u.value.some(b=>e.valueComparator(b.value,n.value)));tl&&window.requestAnimationFrame(()=>{var n;a>=0&&((n=J.value)==null||n.scrollToIndex(a))})}}),de(()=>e.items,(a,n)=>{f.value||V.value&&!n.length&&a.length&&(f.value=!0)}),ol(()=>{const a=!!(!e.hideNoData||C.value.length||d["prepend-item"]||d["append-item"]||d["no-data"]),n=u.value.length>0,b=me.filterProps(e);return t(me,oe({ref:I},b,{modelValue:p.value,"onUpdate:modelValue":[s=>p.value=s,Se],focused:V.value,"onUpdate:focused":s=>V.value=s,validationValue:u.externalValue,counterValue:we.value,dirty:n,class:["v-combobox",{"v-combobox--active-menu":f.value,"v-combobox--chips":!!e.chips,"v-combobox--selection-slot":!!h.value,"v-combobox--selecting-index":m.value>-1,[`v-combobox--${e.multiple?"multiple":"single"}`]:!0},e.class],style:e.style,readonly:e.readonly,placeholder:n?void 0:e.placeholder,"onClick:clear":B,"onMousedown:control":Ce,onKeydown:k}),{...d,default:()=>t(G,null,[t(nl,oe({ref:fe,modelValue:f.value,"onUpdate:modelValue":s=>f.value=s,activator:"parent",contentClass:"v-combobox__content",disabled:q.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:l,onAfterLeave:A},e.menuProps),{default:()=>[a&&t($l,oe({ref:ae,selected:ue.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:s=>s.preventDefault(),onKeydown:o,onFocusin:R,onFocusout:M,tabindex:"-1","aria-live":"polite",color:e.itemColor??e.color},te,e.listProps),{default:()=>{var s,c,U;return[(s=d["prepend-item"])==null?void 0:s.call(d),!C.value.length&&!e.hideNoData&&(((c=d["no-data"])==null?void 0:c.call(d))??t(qe,{title:y(e.noDataText)},null)),t(Ml,{ref:J,renderless:!0,items:C.value},{default:X=>{var Ue;let{item:P,index:H,itemRef:_}=X;const Me=oe(P.props,{ref:_,key:H,active:re.value&&H===0?!0:void 0,onClick:()=>g(P,null)});return((Ue=d.item)==null?void 0:Ue.call(d,{item:P,index:H,props:Me}))??t(qe,oe(Me,{role:"option"}),{prepend:pe=>{let{isSelected:ge}=pe;return t(G,null,[e.multiple&&!e.hideSelected?t(Tl,{key:P.value,modelValue:ge,ripple:!1,tabindex:"-1"},null):void 0,P.props.prependAvatar&&t(sl,{image:P.props.prependAvatar},null),P.props.prependIcon&&t(he,{icon:P.props.prependIcon},null)])},title:()=>{var pe,ge;return z.value?P.title:Kl(P.title,(pe=le(P))==null?void 0:pe.title,((ge=p.value)==null?void 0:ge.length)??0)}})}}),(U=d["append-item"])==null?void 0:U.call(d)]}})]}),u.value.map((s,c)=>{function U(_){_.stopPropagation(),_.preventDefault(),g(s,!1)}const X={"onClick:close":U,onKeydown(_){_.key!=="Enter"&&_.key!==" "||(_.preventDefault(),_.stopPropagation(),U(_))},onMousedown(_){_.preventDefault(),_.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},P=L.value?!!d.chip:!!d.selection,H=P?ul(L.value?d.chip({item:s,index:c,props:X}):d.selection({item:s,index:c})):void 0;if(!(P&&!H))return t("div",{key:s.value,class:["v-combobox__selection",c===m.value&&["v-combobox__selection--selected",Q.value]],style:c===m.value?ee.value:{}},[L.value?d.chip?t(rl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:s.title}}},{default:()=>[H]}):t(Bl,oe({key:"chip",closable:e.closableChips,size:"small",text:s.title,disabled:s.props.disabled},X),null):H??t("span",{class:"v-combobox__selection-text"},[s.title,e.multiple&&c<u.value.length-1&&t("span",{class:"v-combobox__selection-comma"},[D(",")])])])})]),"append-inner":function(){var X;for(var s=arguments.length,c=new Array(s),U=0;U<s;U++)c[U]=arguments[U];return t(G,null,[(X=d["append-inner"])==null?void 0:X.call(d,...c),(!e.hideNoData||e.items.length)&&e.menuIcon?t(he,{class:"v-combobox__menu-icon",icon:e.menuIcon,onMousedown:r,onClick:il,"aria-label":y(F.value),title:y(F.value),tabindex:"-1"},null):void 0])}})}),dl({isFocused:V,isPristine:z,menu:f,search:p,selectionIndex:m,filteredItems:N,select:g},I)}}),He=e=>(xl("data-v-4aea65dc"),e=e(),kl(),e),jl=He(()=>De("h2",{class:"text-center"}," 商品管理 ",-1)),ql={class:"images-container"},Xl={key:0,class:"mb-5 px-2 py-1",style:{border:"1px solid #ababab","border-radius":"4px"}},Hl=He(()=>De("div",{style:{"font-size":"14px","font-weight":"400",color:"#333"}}," 現有圖片： ",-1)),We={__name:"product",setup(e){const{apiAuth:S}=bl(),T=pl(),d=x(null),y=x({open:!1,id:""}),I=x({open:!1}),V=x([]),z=r=>{r?(y.value.id=r._id,Y.value.value=r.name,Z.value.value=r.price,Q.value.value=r.description,ee.value.value=r.category,u.value.value=r.sell,E.value.value=r.colors,L.value.value=r.sizes,V.value=r.images.map(o=>({url:o,isExisting:!0})),h.value=[],w.value=[]):(y.value.id="",h.value=[],w.value=[],V.value=[]),y.value.open=!0,console.log("Dialog opened with id:",y.value.id)},j=()=>{y.value.open=!1,ke(),d.value.deleteFileRecord(),h.value=[],w.value=[],V.value=[],console.log("Dialog closed")},fe=()=>{I.value.open=!0},J=()=>{I.value.open=!1},ne=["紅色","藍色","黃色","綠色","紫色","橘色","星空灰","亮彩橘","亮粉紅","新款黑","新款白","顏色請備註在訂單"],f=["XS","S","M","L","XL","2XL","3XL","F","21","22","23","24","25","26","27","28","29","尺寸請備註在訂單"],m=["球衣","球褲","球襪","球鞋","排球","護具","其他"],se=wl({name:ce().required("商品名稱必填"),price:Cl().typeError("商品價格格式錯誤").required("商品價格必填").min(0,"商品價格不能小於 0"),colors:Oe().of(ce()),sizes:Oe().of(ce()),description:ce().required("商品說明必填"),category:ce().required("商品分類必填").test("isCategory","商品分類錯誤",r=>m.includes(r)),sell:Sl()}),{handleSubmit:xe,isSubmitting:F,resetForm:ke}=Il({validationSchema:se,initialValues:{name:"",price:0,colors:[],sizes:[],description:"",category:"",sell:!0}}),Y=W("name"),Z=W("price"),Q=W("description"),ee=W("category"),u=W("sell"),E=W("colors"),L=W("sizes"),h=x([]),w=x([]),p=xe(async r=>{var o,k;if(console.log("Submit clicked"),F.value=!1,F.value){console.log("Already submitting");return}if(h.value.some(l=>l.error)){console.log("File records have errors");return}if(y.value.id.length===0&&h.value.length<1&&V.value.length===0){console.log("No files to submit");return}F.value=!0,console.log("Start submitting");try{const l=new FormData;l.append("name",r.name),l.append("price",r.price),l.append("description",r.description),r.colors.forEach(M=>l.append("colors",M)),r.sizes.forEach(M=>l.append("sizes",M)),l.append("category",r.category),l.append("sell",r.sell);const A=V.value.map(M=>M.url);l.append("existingImages",JSON.stringify(A)),console.log("FormData before files:",...l.entries()),h.value.forEach(M=>{M.file&&l.append("newImages",M.file)});for(const[M,Se]of l.entries())console.log(M,Se);let g;y.value.id===""?(console.log("Creating new product"),g=await S.post("/product",l)):(console.log("Updating existing product"),g=await S.patch("/product/"+y.value.id,l)),console.log("API response:",g.data),T({text:y.value.id===""?"新增成功":"編輯成功",snackbarProps:{color:"teal-darken-1"}}),j();const R=C.value;B(!1,R)}catch(l){console.log("Error:",l),console.log("Error details:",l.response?l.response.data:l.message),T({text:((k=(o=l==null?void 0:l.response)==null?void 0:o.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}finally{console.log("Resetting isSubmitting"),F.value=!1,h.value=[],w.value=[],V.value=[]}}),we=r=>{V.value.splice(r,1)},N=x(10),le=x([{key:"createdAt",order:"desc"}]),C=x(1),ue=x([]),re=[{title:"圖片",align:"left",sortable:!1,key:"images",width:"180px",render:r=>`
        <div class="images-container" style="width: 200px;">
          ${r.slice(0,3).map(k=>`
            <img src="${k}" style="height: 50px; width: 50px; object-fit: cover; margin-right: 5px;" />
          `).join("")}
          ${r.length>3?`<span>+${r.length-3} 更多</span>`:""}
        </div>
      `},{title:"名稱",align:"left",sortable:!0,key:"name",width:"200px"},{title:"顏色",align:"left",sortable:!0,key:"colors",width:"220px"},{title:"尺寸",align:"left",sortable:!0,key:"sizes",width:"200px"},{title:"價格",align:"left",sortable:!0,key:"price",width:"120px"},{title:"分類",align:"left",sortable:!0,key:"category",width:"120px"},{title:"上架",align:"left",sortable:!0,key:"sell",width:"120px"},{title:"操作",align:"left",sortable:!1,key:"action",width:"120px"}],q=x(!0),ae=x(0),te=x(""),B=async(r,o=null)=>{var k,l,A,g;r?C.value=1:o!==null&&(C.value=o),q.value=!0;try{const{data:R}=await S.get("/product/all",{params:{page:C.value,itemsPerPage:N.value,sortBy:((k=le.value[0])==null?void 0:k.key)||"createdAt",sortOrder:((l=le.value[0])==null?void 0:l.order)||"desc",search:te.value}});ue.value.splice(0,ue.value.length,...R.result.data),ae.value=R.result.total}catch(R){console.log("提交表單時出錯",R),T({text:((g=(A=R==null?void 0:R.response)==null?void 0:A.data)==null?void 0:g.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}q.value=!1};B();const Ce=async()=>{var r,o;if(y.value.id)try{F.value=!0,await S.delete(`/product/${y.value.id}`),T({text:"刪除成功",snackbarProps:{color:"teal-darken-1"}}),j(),J(),B(!0)}catch(k){console.log(k),T({text:((o=(r=k==null?void 0:k.response)==null?void 0:r.data)==null?void 0:o.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}finally{F.value=!1}};return(r,o)=>{const k=gl("vue-file-agent");return K(),be(G,null,[t(Pl,null,{default:i(()=>[t(_e,null,{default:i(()=>[t(Ve,{cols:"12"},{default:i(()=>[jl]),_:1}),t(Ve,{cols:"12",class:"d-flex pa-0 ps-4 pe-4 mt-5"},{default:i(()=>[t(O,{class:"custom-btn",onClick:o[0]||(o[0]=l=>z(null))},{default:i(()=>[D(" 新增商品 ")]),_:1}),t(Ie),t(me,{modelValue:te.value,"onUpdate:modelValue":o[1]||(o[1]=l=>te.value=l),label:"搜尋","append-inner-icon":"mdi-magnify",variant:"outlined",density:"compact","max-width":"240",clearable:"",onClickAppend:o[2]||(o[2]=l=>B(!0)),onKeydown:o[3]||(o[3]=yl(l=>B(!0),["enter"]))},null,8,["modelValue"])]),_:1}),t(Ve,{cols:"12"},{default:i(()=>[t(Fl,{"items-per-page":N.value,"onUpdate:itemsPerPage":[o[4]||(o[4]=l=>N.value=l),o[7]||(o[7]=l=>B(!1))],"sort-by":le.value,"onUpdate:sortBy":[o[5]||(o[5]=l=>le.value=l),o[8]||(o[8]=l=>B(!1))],page:C.value,"onUpdate:page":[o[6]||(o[6]=l=>C.value=l),o[9]||(o[9]=l=>B(!1))],"items-per-page-options":[10,20,50],items:ue.value,headers:re,loading:q.value,"items-length":ae.value,search:te.value,hover:""},{top:i(()=>[]),"item.colors":i(({value:l})=>[D(Pe(l.join(", ")),1)]),"item.sizes":i(({value:l})=>[D(Pe(l.join(", ")),1)]),"item.images":i(({value:l})=>[De("div",ql,[(K(!0),be(G,null,$e(l,(A,g)=>(K(),ye(Ke,{key:g,src:A,height:"50",class:"me-2"},null,8,["src"]))),128))])]),"item.sell":i(({value:l})=>[l?(K(),ye(he,{key:0,icon:"mdi-check"})):Fe("",!0)]),"item.action":i(({item:l})=>[t(O,{icon:"mdi-pencil",variant:"plain",class:"edit-btn",onClick:A=>z(l)},null,8,["onClick"])]),_:2},1032,["items-per-page","sort-by","page","items","loading","items-length","search"])]),_:1})]),_:1})]),_:1}),t(Re,{modelValue:y.value.open,"onUpdate:modelValue":o[19]||(o[19]=l=>y.value.open=l),persistent:"",width:"500"},{default:i(()=>[t(_l,{disabled:v(F),onSubmit:Vl(v(p),["prevent"])},{default:i(()=>[t(Te,{class:"rounded-xl pa-4 pt-6"},{default:i(()=>[t(Be,{style:{"font-size":"18px"}},{default:i(()=>[D(Pe(y.value.id?"編輯商品":"新增商品"),1)]),_:1}),t(Le,{class:"mt-3 pa-3"},{default:i(()=>[t(me,{modelValue:v(Y).value.value,"onUpdate:modelValue":o[10]||(o[10]=l=>v(Y).value.value=l),label:"名稱",variant:"outlined",density:"compact","error-messages":v(Y).errorMessage.value},null,8,["modelValue","error-messages"]),t(Xe,{modelValue:v(E).value.value,"onUpdate:modelValue":o[11]||(o[11]=l=>v(E).value.value=l),label:"顏色",items:ne,variant:"outlined",density:"compact",multiple:"",clearable:"","error-messages":v(E).errorMessage.value},null,8,["modelValue","error-messages"]),t(Xe,{modelValue:v(L).value.value,"onUpdate:modelValue":o[12]||(o[12]=l=>v(L).value.value=l),label:"尺寸",items:f,variant:"outlined",density:"compact",clearable:"",multiple:"","error-messages":v(L).errorMessage.value},null,8,["modelValue","error-messages"]),t(me,{modelValue:v(Z).value.value,"onUpdate:modelValue":o[13]||(o[13]=l=>v(Z).value.value=l),label:"價格",type:"number",variant:"outlined",density:"compact",min:"0","error-messages":v(Z).errorMessage.value},null,8,["modelValue","error-messages"]),t(Ul,{modelValue:v(ee).value.value,"onUpdate:modelValue":o[14]||(o[14]=l=>v(ee).value.value=l),label:"分類",items:m,variant:"outlined",density:"compact",clearable:"","error-messages":v(ee).errorMessage.value},null,8,["modelValue","error-messages"]),t(Ll,{modelValue:v(u).value.value,"onUpdate:modelValue":o[15]||(o[15]=l=>v(u).value.value=l),label:"上架","error-messages":v(u).errorMessage.value},null,8,["modelValue","error-messages"]),t(Nl,{modelValue:v(Q).value.value,"onUpdate:modelValue":o[16]||(o[16]=l=>v(Q).value.value=l),label:"說明",variant:"outlined",density:"compact",clearable:"","no-resize":"",rows:"3","error-messages":v(Q).errorMessage.value},null,8,["modelValue","error-messages"]),V.value.length>0?(K(),be("div",Xl,[Hl,t(_e,null,{default:i(()=>[(K(!0),be(G,null,$e(V.value,(l,A)=>(K(),ye(Ve,{key:A,cols:"3",class:"position-relative"},{default:i(()=>[t(O,{icon:"",size:"x-small",elevation:"8",height:"24",width:"24",style:{position:"absolute",right:"0",top:"0","z-index":"1"},onClick:g=>we(A)},{default:i(()=>[t(he,{size:"small",color:"error"},{default:i(()=>[D(" mdi-close ")]),_:1})]),_:2},1032,["onClick"]),t(Ke,{src:l.url,"aspect-ratio":"1",cover:""},{placeholder:i(()=>[t(_e,{class:"fill-height ma-0",justify:"center"},{default:i(()=>[t(hl,{indeterminate:"",color:"grey lighten-5"})]),_:1})]),_:2},1032,["src"])]),_:2},1024))),128))]),_:1})])):Fe("",!0),t(k,{ref_key:"fileAgent",ref:d,modelValue:h.value,"onUpdate:modelValue":o[17]||(o[17]=l=>h.value=l),"raw-model-value":w.value,"onUpdate:rawModelValue":o[18]||(o[18]=l=>w.value=l),accept:"image/jpeg,image/png",multiple:"",deletable:"","max-size":"1MB","help-text":"選擇檔案或拖曳到這裡","error-text":{type:"檔案格式不支援",size:"檔案大小不能超過 1MB"}},null,8,["modelValue","raw-model-value"])]),_:1}),t(Ne,null,{default:i(()=>[y.value.id?(K(),ye(O,{key:0,color:"red",loading:v(F),onClick:fe},{default:i(()=>[D(" 刪除 ")]),_:1},8,["loading"])):Fe("",!0),t(Ie),t(O,{color:"red",loading:v(F),onClick:j},{default:i(()=>[D(" 取消 ")]),_:1},8,["loading"]),t(O,{color:"green",type:"submit",loading:v(F)},{default:i(()=>[D(" 送出 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1},8,["modelValue"]),t(Re,{modelValue:I.value.open,"onUpdate:modelValue":o[20]||(o[20]=l=>I.value.open=l),"max-width":"320"},{default:i(()=>[t(Te,null,{default:i(()=>[t(Be,{class:"headline",style:{"font-size":"18px"}},{default:i(()=>[D(" 確認刪除 ")]),_:1}),t(Le,{class:"mt-3 pa-4"},{default:i(()=>[D(" 您確定要刪除此商品嗎？此操作無法撤銷。 ")]),_:1}),t(Ne,null,{default:i(()=>[t(Ie),t(O,{color:"green darken-1",text:"",onClick:J},{default:i(()=>[D(" 取消 ")]),_:1}),t(O,{color:"red darken-1",text:"",onClick:Ce},{default:i(()=>[D(" 刪除 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof je=="function"&&je(We);const va=fl(We,[["__scopeId","data-v-4aea65dc"]]);export{va as default};
