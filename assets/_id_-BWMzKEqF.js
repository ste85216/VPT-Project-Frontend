import{bJ as le,D as z,K as se,N as ye,O as ie,G as H,a4 as ue,aj as be,T as N,bK as _e,r as I,c as C,a7 as F,ad as R,aH as ke,d as l,I as E,H as X,$ as re,bx as Ve,J as xe,al as Ce,l as ce,F as P,ar as we,m as A,bL as Se,ac as G,bM as Ie,bN as Be,b4 as Pe,bO as Te,am as pe,bP as $e,a0 as Le,Z as Ee,ap as De,bQ as Re,s as j,bm as Ae,a2 as ze,Q as He,R as Xe,bq as Ye,a6 as We,a$ as je,_ as Me,au as Oe,i as Fe,u as Ge,a as Ne,b as T,w as c,bD as Ue,o as V,n as L,f as W,j as $,t as D,bj as qe,g as p,V as q,aN as Qe,C as Je,bR as Ke,ay as Ze,p as et,h as tt}from"./index-BPEKQBz9.js";import{_ as at}from"./CartIcon-DH4Mw-yh.js";import{b as Q}from"./route-block-B_A1xBdJ.js";import{V as nt}from"./VContainer-BHoltgYq.js";import{V as J,a as B}from"./VRow-S_mgH1nz.js";import{a as K,V as Z}from"./VChip-CuHAFC9U.js";const ot=e=>{const{touchstartX:a,touchendX:t,touchstartY:o,touchendY:s}=e,u=.5,n=16;e.offsetX=t-a,e.offsetY=s-o,Math.abs(e.offsetY)<u*Math.abs(e.offsetX)&&(e.left&&t<a-n&&e.left(e),e.right&&t>a+n&&e.right(e)),Math.abs(e.offsetX)<u*Math.abs(e.offsetY)&&(e.up&&s<o-n&&e.up(e),e.down&&s>o+n&&e.down(e))};function lt(e,a){var o;const t=e.changedTouches[0];a.touchstartX=t.clientX,a.touchstartY=t.clientY,(o=a.start)==null||o.call(a,{originalEvent:e,...a})}function st(e,a){var o;const t=e.changedTouches[0];a.touchendX=t.clientX,a.touchendY=t.clientY,(o=a.end)==null||o.call(a,{originalEvent:e,...a}),ot(a)}function it(e,a){var o;const t=e.changedTouches[0];a.touchmoveX=t.clientX,a.touchmoveY=t.clientY,(o=a.move)==null||o.call(a,{originalEvent:e,...a})}function ut(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>lt(t,a),touchend:t=>st(t,a),touchmove:t=>it(t,a)}}function rt(e,a){var v;const t=a.value,o=t!=null&&t.parent?e.parentElement:e,s=(t==null?void 0:t.options)??{passive:!0},u=(v=a.instance)==null?void 0:v.$.uid;if(!o||!u)return;const n=ut(a.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[u]=n,le(n).forEach(d=>{o.addEventListener(d,n[d],s)})}function ct(e,a){var u,n;const t=(u=a.value)!=null&&u.parent?e.parentElement:e,o=(n=a.instance)==null?void 0:n.$.uid;if(!(t!=null&&t._touchHandlers)||!o)return;const s=t._touchHandlers[o];le(s).forEach(v=>{t.removeEventListener(v,s[v])}),delete t._touchHandlers[o]}const de={mounted:rt,unmounted:ct},ve=Symbol.for("vuetify:v-window"),me=Symbol.for("vuetify:v-window-group"),fe=z({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...se(),...ye(),...ie()},"VWindow"),ee=H()({name:"VWindow",directives:{Touch:de},props:fe(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const{themeClasses:o}=ue(e),{isRtl:s}=be(),{t:u}=N(),n=_e(e,me),v=I(),d=C(()=>s.value?!e.reverse:e.reverse),m=F(!1),y=C(()=>{const r=e.direction==="vertical"?"y":"x",S=(d.value?!m.value:m.value)?"-reverse":"";return`v-window-${r}${S}-transition`}),g=F(0),b=I(void 0),w=C(()=>n.items.value.findIndex(r=>n.selected.value.includes(r.id)));R(w,(r,_)=>{const S=n.items.value.length,U=S-1;S<=2?m.value=r<_:r===U&&_===0?m.value=!0:r===0&&_===U?m.value=!1:m.value=r<_}),ke(ve,{transition:y,isReversed:m,transitionCount:g,transitionHeight:b,rootRef:v});const f=C(()=>e.continuous||w.value!==0),Y=C(()=>e.continuous||w.value!==n.items.value.length-1);function x(){f.value&&n.prev()}function h(){Y.value&&n.next()}const k=C(()=>{const r=[],_={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${d.value?"right":"left"}`,onClick:n.prev,"aria-label":u("$vuetify.carousel.prev")};r.push(f.value?t.prev?t.prev({props:_}):l(E,_,null):l("div",null,null));const S={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${d.value?"left":"right"}`,onClick:n.next,"aria-label":u("$vuetify.carousel.next")};return r.push(Y.value?t.next?t.next({props:S}):l(E,S,null):l("div",null,null)),r}),i=C(()=>e.touch===!1?e.touch:{...{left:()=>{d.value?x():h()},right:()=>{d.value?h():x()},start:_=>{let{originalEvent:S}=_;S.stopPropagation()}},...e.touch===!0?{}:e.touch});return X(()=>re(l(e.tag,{ref:v,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var r,_;return[l("div",{class:"v-window__container",style:{height:b.value}},[(r=t.default)==null?void 0:r.call(t,{group:n}),e.showArrows!==!1&&l("div",{class:"v-window__controls"},[k.value])]),(_=t.additional)==null?void 0:_.call(t,{group:n})]}}),[[Ve("touch"),i.value]])),{group:n}}}),dt=z({color:String,cycle:Boolean,delimiterIcon:{type:xe,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...fe({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),vt=H()({name:"VCarousel",props:dt(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const o=Ce(e,"modelValue"),{t:s}=N(),u=I();let n=-1;R(o,d),R(()=>e.interval,d),R(()=>e.cycle,m=>{m?d():window.clearTimeout(n)}),ce(v);function v(){!e.cycle||!u.value||(n=window.setTimeout(u.value.group.next,+e.interval>0?+e.interval:6e3))}function d(){window.clearTimeout(n),window.requestAnimationFrame(v)}return X(()=>{const m=ee.filterProps(e);return l(ee,A({ref:u},m,{modelValue:o.value,"onUpdate:modelValue":y=>o.value=y,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:G(e.height)},e.style]}),{default:t.default,additional:y=>{let{group:g}=y;return l(P,null,[!e.hideDelimiters&&l("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[g.items.value.length>0&&l(we,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[g.items.value.map((b,w)=>{const f={id:`carousel-item-${b.id}`,"aria-label":s("$vuetify.carousel.ariaLabel.delimiter",w+1,g.items.value.length),class:["v-carousel__controls__item",g.isSelected(b.id)&&"v-btn--active"],onClick:()=>g.select(b.id,!0)};return t.item?t.item({props:f,item:b}):l(E,A(b,f),null)})]})]),e.progress&&l(Se,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(g.getItemIndex(o.value)+1)/g.items.value.length*100},null)])},prev:t.prev,next:t.next})}),{}}}),he=z({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...se(),...Ie(),...Be()},"VWindowItem"),te=H()({name:"VWindowItem",directives:{Touch:de},props:he(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:t}=a;const o=Pe(ve),s=Te(e,me),{isBooted:u}=pe();if(!o||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const n=F(!1),v=C(()=>u.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function d(){!n.value||!o||(n.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function m(){var f;n.value||!o||(n.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=G((f=o.rootRef.value)==null?void 0:f.clientHeight)),o.transitionCount.value+=1)}function y(){d()}function g(f){n.value&&De(()=>{!v.value||!n.value||!o||(o.transitionHeight.value=G(f.clientHeight))})}const b=C(()=>{const f=o.isReversed.value?e.reverseTransition:e.transition;return v.value?{name:typeof f!="string"?o.transition.value:f,onBeforeEnter:m,onAfterEnter:d,onEnterCancelled:y,onBeforeLeave:m,onAfterLeave:d,onLeaveCancelled:y,onEnter:g}:!1}),{hasContent:w}=$e(e,s.isSelected);return X(()=>l(Ee,{transition:b.value,disabled:!u.value},{default:()=>{var f;return[re(l("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[w.value&&((f=t.default)==null?void 0:f.call(t))]),[[Le,s.isSelected.value]])]}})),{groupItem:s}}}),mt=z({...Re(),...he()},"VCarouselItem"),ft=H()({name:"VCarouselItem",inheritAttrs:!1,props:mt(),setup(e,a){let{slots:t,attrs:o}=a;X(()=>{const s=j.filterProps(e),u=te.filterProps(e);return l(te,A({class:["v-carousel-item",e.class]},u),{default:()=>[l(j,A(o,s),t)]})})}}),ht={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function gt(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return l("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function ae(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>M(a))}function M(e){let a=[];if(!e)return a;const t=ht[e];if(e!==t){if(e.includes(","))return ne(e);if(e.includes("@"))return ae(e);t.includes(",")?a=ne(t):t.includes("@")?a=ae(t):t&&a.push(M(t))}return[gt(e,a)]}function ne(e){return e.replace(/\s/g,"").split(",").map(M)}const yt=z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Ae(),...ze(),...ie()},"VSkeletonLoader"),oe=H()({name:"VSkeletonLoader",props:yt(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:o,backgroundColorStyles:s}=He(Xe(e,"color")),{dimensionStyles:u}=Ye(e),{elevationClasses:n}=We(e),{themeClasses:v}=ue(e),{t:d}=N(),m=C(()=>M(je(e.type).join(",")));return X(()=>{var b;const y=!t.default||e.loading,g=e.boilerplate||!y?{}:{ariaLive:"polite",ariaLabel:d(e.loadingText),role:"alert"};return l("div",A({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},v.value,o.value,n.value],style:[s.value,y?u.value:{}]},g),[y?m.value:(b=t.default)==null?void 0:b.call(t)])}),{}}}),O=e=>(et("data-v-c9e92937"),e=e(),tt(),e),bt=O(()=>$("h3",null,"尺寸",-1)),_t=O(()=>$("h3",null,"顏色",-1)),kt=O(()=>$("h3",null,"數量",-1)),Vt={class:"px-5"},xt={class:"d-flex align-center pe-1"},Ct=O(()=>$("h1",{class:"no-sell-title"}," 此商品已下架 ",-1)),ge={__name:"[id]",emits:["update:category"],setup(e,{emit:a}){const{apiAuth:t}=Je(),o=Oe(),s=Fe(),u=Ge(),n=I({_id:"",name:"",price:0,images:[],sell:!0,description:"",category:"",colors:[],sizes:[]}),v=I(0),d=I(""),m=I(""),y=I(1),g=I(!0),b=async()=>{var x,h;try{const{data:k}=await t.get(`/product/${o.params.id}`);n.value=k.result,typeof n.value.colors=="string"&&(n.value.colors=n.value.colors.split(",")),typeof n.value.sizes=="string"&&(n.value.sizes=n.value.sizes.split(",")),document.title=`${n.value.name} | VPT`,w("update:category",n.value.category),g.value=!1}catch(k){console.log(k),s({text:((h=(x=k==null?void 0:k.response)==null?void 0:x.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}}),g.value=!1}};ce(()=>{b()});const w=a,f=x=>{y.value=Math.max(1,y.value+x)},Y=async()=>{var h,k;if(!u.isLogin){s({text:"請先登入",snackbarProps:{color:"red-lighten-1"}}),Ke.push("/loginregister");return}if(!d.value||!m.value){s({text:"請選擇尺寸和顏色",snackbarProps:{color:"red-lighten-1"}});return}const x={p_id:n.value._id,colors:m.value,sizes:d.value,quantity:y.value};try{const{data:i}=await t.patch("/user/cart",x);s({text:"商品已加入購物車",snackbarProps:{color:"teal-darken-1"}}),i.result&&Array.isArray(i.result.cart)?u.cart=[...i.result.cart]:console.error("購物車數據結構錯誤",i.result.cart)}catch(i){console.log(i),s({text:((k=(h=i==null?void 0:i.response)==null?void 0:h.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}};return R(()=>u.cart,x=>{u.cart=x}),(x,h)=>{const k=Ne("router-link");return V(),T(P,null,[l(nt,null,{default:c(()=>[l(J,null,{default:c(()=>[l(B,{class:"pa-0 pt-5 pb-4",cols:"12",sm:"6"},{default:c(()=>[g.value?(V(),L(oe,{key:0,class:"rounded-xl elevation-6 skeleton-full-height",type:"image"})):(V(),T(P,{key:1},[l(vt,{modelValue:v.value,"onUpdate:modelValue":h[0]||(h[0]=i=>v.value=i),"hide-delimiters":"","show-arrows":!1,height:"480",class:"rounded-xl elevation-6"},{default:c(()=>[(V(!0),T(P,null,W(n.value.images,(i,r)=>(V(),L(ft,{key:r},{default:c(()=>[l(j,{src:i,cover:"",height:"480",class:"product-img"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),l(J,{class:"mt-4"},{default:c(()=>[(V(!0),T(P,null,W(n.value.images,(i,r)=>(V(),L(B,{key:r,cols:"3"},{default:c(()=>[l(j,{src:i,cover:"",height:"80",class:Ze(["thumbnail",{"thumbnail-active":v.value===r}]),onClick:_=>v.value=r},null,8,["src","class","onClick"])]),_:2},1024))),128))]),_:1})],64))]),_:1}),l(B,{cols:"12",sm:"6",class:"ps-0 ps-sm-10 d-flex flex-column"},{default:c(()=>[g.value?(V(),L(oe,{key:0,type:"article"})):(V(),T(P,{key:1},[l(B,null,{default:c(()=>[$("h2",null,D(n.value.name),1),l(qe,{class:"custom-subtitle mt-2"},{default:c(()=>[p(D(n.value.description),1)]),_:1})]),_:1}),l(B,null,{default:c(()=>[bt,l(K,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=i=>d.value=i),class:"pa-0",column:"",filter:""},{default:c(()=>[(V(!0),T(P,null,W(n.value.sizes,(i,r)=>(V(),L(Z,{key:r,value:i,size:"large",color:"teal-lighten-1"},{default:c(()=>[p(D(i),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(B,null,{default:c(()=>[_t,l(K,{modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=i=>m.value=i),class:"pa-0",column:"",filter:""},{default:c(()=>[(V(!0),T(P,null,W(n.value.colors,(i,r)=>(V(),L(Z,{key:r,value:i,size:"large",color:"teal-lighten-1"},{default:c(()=>[p(D(i),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(B,{class:"mb-0 mb-sm-"},{default:c(()=>[kt,l(E,{size:"x-small",icon:"",variant:"text",color:"red",onClick:h[3]||(h[3]=i=>f(-1))},{default:c(()=>[l(q,null,{default:c(()=>[p("mdi-minus")]),_:1})]),_:1}),$("span",Vt,D(y.value),1),l(E,{size:"x-small",icon:"",variant:"text",color:"#039199",onClick:h[4]||(h[4]=i=>f(1))},{default:c(()=>[l(q,null,{default:c(()=>[p("mdi-plus")]),_:1})]),_:1})]),_:1}),l(B,{class:"py-0 d-flex align-end"},{default:c(()=>[l(Qe,{class:"pa-0 w-100",justify:"center"},{default:c(()=>[l(E,{class:"addCart-btn",block:"",variant:"outlined",onClick:Y},{default:c(()=>[$("div",xt,[l(at,{size:20})]),p(" 加入購物車 ")]),_:1})]),_:1})]),_:1})],64))]),_:1})]),_:1})]),_:1}),l(Ue,{class:"align-center justify-center","model-value":!n.value.sell,persistent:""},{default:c(()=>[Ct,l(k,{class:"no-sell-subtitle",to:"/products"},{default:c(()=>[p(" 逛逛其他商品 → ")]),_:1})]),_:1},8,["model-value"])],64)}}};typeof Q=="function"&&Q(ge);const pt=Me(ge,[["__scopeId","data-v-c9e92937"]]);export{pt as default};
