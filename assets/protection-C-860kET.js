import{_ as F,i as M,r as s,ad as h,l as N,n as i,w as a,o as r,d as o,aK as A,e as L,v as R,b as y,F as V,f as U,z as x,C as z,m as G,p as K,h as Q,j as P}from"./index-D37NW1qG.js";import{P as q}from"./ProductCard-B3Fnpi7t.js";import{b as k}from"./route-block-B_A1xBdJ.js";import{V as D}from"./VContainer-gL2uZUUs.js";import{a as n,V as b}from"./VRow-BJWLImYk.js";import{V as H}from"./VPagination-ClvJ8oGO.js";import"./VHover-BZ3utV75.js";const C=p=>(K("data-v-5cd53f0b"),p=p(),Q(),p),J=C(()=>P("h2",null,"所有商品",-1)),O=C(()=>P("p",null,"沒有找到相關商品",-1)),w=18,S={__name:"protection",setup(p){const{api:I}=z(),E=M(),l=s(1),m=s(1),d=s(""),g=s("護具"),f=s([]),v=s(!1),_=s(!1),c=async()=>{v.value=!0;try{const e={itemsPerPage:w,page:l.value,category:g.value,search:d.value},{data:t}=await I.get("/product",{params:e});if(t.success)f.value=t.result.data,m.value=Math.ceil(t.result.total/w);else throw new Error(t.message||"載入商品失敗")}catch(e){console.error("載入商品時發生錯誤:",e),E({text:e.message||"載入商品時發生錯誤",snackbarProps:{color:"red-lighten-1"}}),f.value=[],m.value=1}finally{v.value=!1}},T=(()=>{let e;return()=>{_.value=!0,clearTimeout(e),e=setTimeout(()=>{l.value=1,c(),_.value=!1},300)}})(),j=()=>{d.value="",l.value=1,c()},B=()=>{window.scrollTo({top:0,behavior:"smooth"}),c()};return h(g,()=>{l.value=1,c()}),h(d,e=>{e===""&&(l.value=1,c())}),N(()=>{c()}),(e,t)=>(r(),i(D,{class:"pa-0 h-100"},{default:a(()=>[o(b,{class:"d-flex justify-start align-start"},{default:a(()=>[o(n,{cols:"12",class:"d-flex justify-space-between pb-0"},{default:a(()=>[o(b,null,{default:a(()=>[o(n,null,{default:a(()=>[J]),_:1}),o(n,{sm:"3"},{default:a(()=>[o(A,{modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=u=>d.value=u),variant:"outlined",density:"compact","max-width":"240","append-inner-icon":"mdi-magnify",placeholder:"搜尋商品",loading:_.value,clearable:"",onInput:L(T),"onClick:clear":j},null,8,["modelValue","loading","onInput"])]),_:1})]),_:1})]),_:1}),v.value?(r(),i(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[o(R,{indeterminate:"",color:"primary"})]),_:1})):(r(),y(V,{key:1},[(r(!0),y(V,null,U(f.value,u=>(r(),i(n,{key:u._id,cols:"6",md:"4",class:"px-0 d-flex justify-center"},{default:a(()=>[o(q,G({ref_for:!0},u),null,16)]),_:2},1024))),128)),f.value.length===0?(r(),i(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[O]),_:1})):x("",!0)],64)),m.value>1?(r(),i(n,{key:2,cols:"12"},{default:a(()=>[o(H,{modelValue:l.value,"onUpdate:modelValue":[t[1]||(t[1]=u=>l.value=u),B],length:m.value,rounded:"circle",density:"compact","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",color:"teal-darken-1"},null,8,["modelValue","length"])]),_:1})):x("",!0)]),_:1})]),_:1}))}};typeof k=="function"&&k(S);const te=F(S,[["__scopeId","data-v-5cd53f0b"]]);export{te as default};
