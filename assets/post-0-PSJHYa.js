import{bl as Ke,D as Ge,J as He,K as Je,aE as Xe,bm as Qe,a2 as Ye,L as Ze,bn as el,M as ll,N as al,O as tl,bo as nl,G as ol,al as rl,c as ne,a4 as ul,bp as sl,aF as dl,bq as il,a6 as cl,X as ml,br as fl,S as vl,U as pl,R as _l,T as gl,d as e,bs as yl,V as T,ar as we,I as g,m as Ae,_ as bl,k as kl,i as Vl,r as S,l as hl,a as Cl,b as z,w as a,B as ye,F as E,C as xl,o as m,ax as be,g as o,e as s,n as _,bj as ae,z as k,f as te,aM as $l,q as W,x as Se,t as i,A as ke,aK as L,aN as Ve,aw as he,j as f,p as Pl,h as Tl}from"./index-evL9p-l4.js";import{C as wl}from"./ConfirmDeleteDialog-BbhPyoFr.js";import{c as Sl,a as $,u as Il,b as P}from"./vee-validate.esm-C1WHYO6v.js";import{b as Ie}from"./route-block-B_A1xBdJ.js";import{V as y,a as r}from"./VRow-B-tIestn.js";import{V as De}from"./VDivider-BNlHxILR.js";import{V as Dl}from"./VForm-468b44_i.js";import{V as zl}from"./VAutocomplete-z5J20Qb7.js";import{a as ze,V as El,c as Ml,d as Al}from"./VList-BEd_p6vo.js";import{a as Ee}from"./VSelect-CA82uZId.js";import{V as Fl}from"./VTextarea-Bt8RLZl_.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./filter-D9hzFgwH.js";import"./VCheckboxBtn-DaOh0ggt.js";import"./VChip-C3RR8zer.js";const Ul=Ke("v-alert-title"),Ll=["success","info","warning","error"],Nl=Ge({border:{type:[Boolean,String],validator:u=>typeof u=="boolean"||["top","end","bottom","start"].includes(u)},borderColor:String,closable:Boolean,closeIcon:{type:He,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:u=>Ll.includes(u)},...Je(),...Xe(),...Qe(),...Ye(),...Ze(),...el(),...ll(),...al(),...tl(),...nl({variant:"flat"})},"VAlert"),Me=ol()({name:"VAlert",props:Nl(),emits:{"click:close":u=>!0,"update:modelValue":u=>!0},setup(u,I){let{emit:J,slots:c}=I;const h=rl(u,"modelValue"),N=ne(()=>{if(u.icon!==!1)return u.type?u.icon??`$${u.type}`:u.icon}),V=ne(()=>({color:u.color??u.type,variant:u.variant})),{themeClasses:K}=ul(u),{colorClasses:M,colorStyles:A,variantClasses:G}=sl(V),{densityClasses:b}=dl(u),{dimensionStyles:X}=il(u),{elevationClasses:oe}=cl(u),{locationStyles:Q}=ml(u),{positionClasses:re}=fl(u),{roundedClasses:ue}=vl(u),{textColorClasses:Y,textColorStyles:H}=pl(_l(u,"borderColor")),{t:Z}=gl(),q=ne(()=>({"aria-label":Z(u.closeLabel),onClick(F){h.value=!1,J("click:close",F)}}));return()=>{const F=!!(c.prepend||N.value),B=!!(c.title||u.title),R=!!(c.close||u.closable);return h.value&&e(u.tag,{class:["v-alert",u.border&&{"v-alert--border":!!u.border,[`v-alert--border-${u.border===!0?"start":u.border}`]:!0},{"v-alert--prominent":u.prominent},K.value,M.value,b.value,oe.value,re.value,ue.value,G.value,u.class],style:[A.value,X.value,Q.value,u.style],role:"alert"},{default:()=>{var j,O;return[yl(!1,"v-alert"),u.border&&e("div",{key:"border",class:["v-alert__border",Y.value],style:H.value},null),F&&e("div",{key:"prepend",class:"v-alert__prepend"},[c.prepend?e(we,{key:"prepend-defaults",disabled:!N.value,defaults:{VIcon:{density:u.density,icon:N.value,size:u.prominent?44:28}}},c.prepend):e(T,{key:"prepend-icon",density:u.density,icon:N.value,size:u.prominent?44:28},null)]),e("div",{class:"v-alert__content"},[B&&e(Ul,{key:"title"},{default:()=>{var D;return[((D=c.title)==null?void 0:D.call(c))??u.title]}}),((j=c.text)==null?void 0:j.call(c))??u.text,(O=c.default)==null?void 0:O.call(c)]),c.append&&e("div",{key:"append",class:"v-alert__append"},[c.append()]),R&&e("div",{key:"close",class:"v-alert__close"},[c.close?e(we,{key:"close-defaults",defaults:{VBtn:{icon:u.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var D;return[(D=c.close)==null?void 0:D.call(c,{props:q.value})]}}):e(g,Ae({key:"close-btn",icon:u.closeIcon,size:"x-small",variant:"text"},q.value),null)])]}})}}}),v=u=>(Pl("data-v-5d000745"),u=u(),Tl(),u),ql=v(()=>f("h3",{class:"opacity-90 mb-4"}," 刊登列表 ",-1)),Bl=v(()=>f("br",null,null,-1)),Rl=v(()=>f("br",null,null,-1)),jl=v(()=>f("br",null,null,-1)),Ol=v(()=>f("br",null,null,-1)),Wl=v(()=>f("br",null,null,-1)),Kl=v(()=>f("br",null,null,-1)),Gl=v(()=>f("br",null,null,-1)),Hl=v(()=>f("br",null,null,-1)),Jl=v(()=>f("br",null,null,-1)),Xl=v(()=>f("br",null,null,-1)),Ql=v(()=>f("br",null,null,-1)),Yl=v(()=>f("br",null,null,-1)),Zl=v(()=>f("br",null,null,-1)),ea=v(()=>f("br",null,null,-1)),la=v(()=>f("br",null,null,-1)),aa=v(()=>f("br",null,null,-1)),ta=v(()=>f("br",null,null,-1)),na=v(()=>f("br",null,null,-1)),oa=v(()=>f("br",null,null,-1)),ra=v(()=>f("br",null,null,-1)),ua=v(()=>f("br",null,null,-1)),sa={key:1},da={class:"enrollment-list-name"},ia={class:"enrollment-list-userId"},Fe={__name:"post",setup(u){const{mdAndUp:I,smAndUp:J}=kl(),{apiAuth:c}=xl(),h=Vl(),N=ne(()=>new Date().toISOString().split("T")[0]),V=S([]),K=S([]),M=S({}),A=S({}),G=S(!1),b=S({open:!1,time:null,type:null}),X=t=>{b.value.type=t,b.value.open=!0},oe=()=>{b.value.type==="start"?B.value.value=b.value.time:R.value.value=b.value.time,b.value.open=!1,b.value.time=null},Q=()=>{b.value={open:!1,time:null,type:null}},re=Sl({venueId:$().required("請選擇球場"),date:$().required("請選擇日期"),startTime:$().required("請輸入開始時間"),endTime:$().required("請輸入結束時間"),netheight:$().required("請選擇網高"),level:$().required("請選擇程度"),male:$().min(0,"人數不能小於0"),female:$().min(0,"人數不能小於0"),nopreference:$().min(0,"人數不能小於0"),fee:$().required("請輸入費用").min(1,"請填寫費用"),note:$()}).test("at-least-one-gender","至少需要填寫其中一性別的人數",function(t){return Number(t.male)>0||Number(t.female)>0||Number(t.nopreference)>0?!0:this.createError({path:"male",message:"三欄必填一欄人數"})}),{handleSubmit:ue,isSubmitting:Y,resetForm:H,errors:Z}=Il({validationSchema:re,initialValues:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}}),q=P("venueId"),F=P("date"),B=P("startTime"),R=P("endTime"),j=P("netheight"),O=P("level"),D=P("male"),se=P("female"),de=P("nopreference"),ie=P("fee"),ce=P("note"),w=S({open:!1,id:null}),ee=S({open:!1}),me=S(null),Ue=ue(async t=>{var n,d;try{const l={...t,v_id:t.venueId,time:`${t.startTime}-${t.endTime}`,male:parseInt(t.male),female:parseInt(t.female),nopreference:parseInt(t.nopreference),fee:parseFloat(t.fee)};delete l.venueId,delete l.startTime,delete l.endTime;let p;w.value.id?p=await c.patch(`/session/${w.value.id}`,l):(p=await c.post("/session",l),console.log(p)),h({text:w.value.id?"場次編輯成功":"場次新增成功",snackbarProps:{color:"teal-darken-1"}}),fe(),xe()}catch(l){console.error(l),h({text:((d=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:d.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}}),le=t=>{if(t?A.value[t._id]=!0:G.value=!0,Q(),t){w.value.id=t._id;const[n,d]=t.time.split("-");H({values:{venueId:t.v_id._id||t.v_id,date:Le(t.date),startTime:n,endTime:d,netheight:t.netheight,level:t.level,male:t.male,female:t.female,nopreference:t.nopreference,fee:t.fee,note:t.note}})}else w.value.id=null,H({values:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}});w.value.open=!0,t?A.value[t._id]=!1:G.value=!1},Le=t=>new Date(t).toISOString().split("T")[0],fe=()=>{H(),Q(),w.value.open=!1},ve=t=>{me.value=t,ee.value.open=!0},Ce=()=>{ee.value.open=!1},Ne=async()=>{var t,n;try{await c.delete(`/session/${me.value}`),V.value=V.value.filter(d=>d._id!==me.value),h({text:"場次已成功取消",snackbarProps:{color:"teal-darken-1"}}),Ce()}catch(d){h({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}},xe=async()=>{var t,n;try{const{data:d}=await c.get("/session/user");Array.isArray(d.result)?V.value=d.result:(console.error("Received data is not an array:",d),h({text:"接收到的資料格式不正確",snackbarProps:{color:"red-lighten-1"}}))}catch(d){console.error("Error loading sessions:",d),h({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"無法加載場次資料",snackbarProps:{color:"red-lighten-1"}})}},pe=t=>t&&typeof t=="object"&&t.name||"未知場地",_e=t=>new Date(t).toLocaleDateString("zh-TW"),qe=async()=>{var t,n;try{let d=[],l=1,p=!0;const x=100;for(;p;){const{data:C}=await c.get("/venue",{params:{page:l,itemsPerPage:x}});Array.isArray(C.result.data)&&C.result.data.length>0?(d=d.concat(C.result.data),C.result.data.length<x?p=!1:l++):p=!1}K.value=d.map(C=>{const Pe=C.address.replace(/^\d{3,5}\s*/,"").match(/^(.+?[市縣])/),Te=Pe?Pe[1]:"未知地區";return{id:C._id.$oid||C._id,name:C.name,city:Te,fullName:`[${Te}] ${C.name}`}}).sort((C,$e)=>C.city.localeCompare($e.city,"zh-TW")),console.log(`Loaded ${K.value.length} venues`)}catch(d){console.error("Error loading venues:",d),h({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"無法加載球場資料",snackbarProps:{color:"red-lighten-1"}})}},Be=(t,n,d)=>{const l=n.toLowerCase();return t.raw.fullName.toLowerCase().includes(l)||t.raw.city.toLowerCase().includes(l)||t.raw.name.toLowerCase().includes(l)},U=S({open:!1,enrollments:[],session:null}),Re=t=>{const n=[];return t.male>0&&n.push(`男${t.male}人`),t.female>0&&n.push(`女${t.female}人`),t.nopreference>0&&n.push(`不限${t.nopreference}人`),n.length>0?n.join(" "):"無報名資料"},je=t=>{if(!t)return"無資料";const n=t.male-(t.participantMale||0),d=t.female-(t.participantFemale||0),l=t.nopreference-(t.participantNoPreference||0);if(n<=0&&d<=0&&l<=0)return"名額已滿";const p=[];return l>0&&p.push(`不限${l}人`),n>0&&p.push(`男${n}人`),d>0&&p.push(`女${d}人`),`尚需: ${p.join(" ")}`},Oe=async t=>{try{const{data:n}=await c.get(`/session/${t}`),d=V.value.findIndex(l=>l._id===t);d!==-1&&(V.value[d]=n.result)}catch(n){console.error("Error updating session data:",n),h({text:"無法更新場次資料",snackbarProps:{color:"red-lighten-1"}})}},ge=async t=>{M.value[t._id]=!0;try{const n=await c.get(`/enrollment/session/${t._id}`);U.value={open:!0,enrollments:n.data.result.sort((d,l)=>new Date(d.createdAt)-new Date(l.createdAt)),session:t},await Oe(t._id)}catch(n){console.error("Error fetching enrollment records:",n),h({text:"無法獲取報名紀錄",snackbarProps:{color:"red-lighten-1"}})}finally{M.value[t._id]=!1}},We=()=>{U.value.open=!1};return hl(()=>{xe(),qe()}),(t,n)=>{const d=Cl("v-time-picker");return m(),z(E,null,[e(y,{class:"mt-4"},{default:a(()=>[e(r,{cols:"12",class:"pt-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12",sm:"3"},{default:a(()=>[ql]),_:1}),e(be),e(r,{cols:"12",sm:"3"},{default:a(()=>[e(g,{block:"",elevation:"0",variant:"flat",class:"post-btn",loading:G.value,onClick:n[0]||(n[0]=l=>le(null))},{default:a(()=>[o(" 刊登場次 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(r,{class:"pt-0 pb-2"},{default:a(()=>[e(De)]),_:1}),s(I)?(m(),_(r,{key:0,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"15px"}},{default:a(()=>[e(r,null,{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{cols:"2"},{default:a(()=>[o(" 日期/時段 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 網高 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 程度 ")]),_:1}),e(r,null,{default:a(()=>[o(" 人數 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 費用 ")]),_:1}),e(r,null,{default:a(()=>[o(" 備註 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(ae,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),z(E,null,te(V.value,(l,p)=>(m(),_(W,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:he({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(pe(l.v_id)),1)]),_:2},1024),e(r,{cols:"2"},{default:a(()=>[o(i(_e(l.date))+" ",1),Bl,o(" "+i(l.time),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.netheight),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.level),1)]),_:2},1024),e(r,null,{default:a(()=>[l.male>0?(m(),z(E,{key:0},[o(" 男:"+i(l.male)+" (已報名:"+i(l.participantMale)+") ",1),Rl],64)):k("",!0),l.female>0?(m(),z(E,{key:1},[o(" 女:"+i(l.female)+" (已報名:"+i(l.participantFemale)+") ",1),jl],64)):k("",!0),l.nopreference>0?(m(),z(E,{key:2},[o(" 不限:"+i(l.nopreference)+" (已報名:"+i(l.participantNoPreference)+") ",1)],64)):k("",!0)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2 md-btn",loading:M.value[l._id],onClick:x=>ge(l)},{default:a(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1 md-btn",loading:A.value[l._id],onClick:x=>le(l)},{default:a(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1 md-btn",onClick:x=>ve(l._id.$oid||l._id)},{default:a(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!s(I)&&s(J)?(m(),_(r,{key:1,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:a(()=>[e(r,{class:"align-self-center"},{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 日期"),Ol,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 網高"),Wl,o("程度"),Kl,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 人數 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 備註 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(ae,{key:0,align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),z(E,null,te(V.value,(l,p)=>(m(),_(W,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:he({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(pe(l.v_id)),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(_e(l.date))+" ",1),Gl,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.netheight),1),Hl,o(" "+i(l.level),1),Jl,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[o(" 男:"+i(l.male),1),Xl,o(" 女:"+i(l.female)+" ",1),Ql,o(" 不限:"+i(l.nopreference),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,null,{default:a(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",loading:M.value[l._id],onClick:x=>ge(l)},{default:a(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),Yl,e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",loading:A.value[l._id],onClick:x=>le(l)},{default:a(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),Zl,e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:x=>ve(l._id.$oid||l._id)},{default:a(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!s(I)&&!s(J)?(m(),_(r,{key:2,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:a(()=>[e(r,{class:"align-self-center"},{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 日期"),ea,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 網高"),la,o("程度"),aa,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(ae,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),z(E,null,te(V.value,(l,p)=>(m(),_(W,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:he({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(pe(l.v_id)),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(_e(l.date))+" ",1),ta,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.netheight),1),na,o(" "+i(l.level),1),oa,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",loading:M.value[l._id],onClick:x=>ge(l)},{default:a(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),ra,e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",loading:A.value[l._id],onClick:x=>le(l)},{default:a(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),ua,e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:x=>ve(l._id.$oid||l._id)},{default:a(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0)]),_:1}),e(ye,{modelValue:w.value.open,"onUpdate:modelValue":n[14]||(n[14]=l=>w.value.open=l),persistent:"",width:"440"},{default:a(()=>[e(Dl,{onSubmit:$l(s(Ue),["prevent"])},{default:a(()=>[e(W,{class:"rounded-lg px-6 py-5"},{default:a(()=>[e(Se,{class:"dialog-title"},{default:a(()=>[o(i(w.value.id?"編輯場次":"新增場次"),1)]),_:1}),e(ke,{class:"mt-3 pa-3"},{default:a(()=>[e(zl,{modelValue:s(q).value.value,"onUpdate:modelValue":n[1]||(n[1]=l=>s(q).value.value=l),"error-messages":s(q).errorMessage.value,items:K.value,"item-title":"fullName","item-value":"id",label:"球場",variant:"outlined",density:"compact",required:"","menu-props":{maxHeight:400},filter:Be},{item:a(({props:l,item:p})=>[e(ze,Ae(l,{title:p.raw.fullName}),null,16,["title"])]),_:1},8,["modelValue","error-messages","items"]),e(L,{modelValue:s(F).value.value,"onUpdate:modelValue":n[2]||(n[2]=l=>s(F).value.value=l),"error-messages":s(F).errorMessage.value,label:"日期",variant:"outlined",density:"compact",type:"date",required:"",min:N.value},null,8,["modelValue","error-messages","min"]),e(y,null,{default:a(()=>[e(r,{cols:"6"},{default:a(()=>[e(L,{modelValue:s(B).value.value,"onUpdate:modelValue":n[3]||(n[3]=l=>s(B).value.value=l),"error-messages":s(B).errorMessage.value,label:"開始時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[4]||(n[4]=l=>X("start"))},null,8,["modelValue","error-messages"])]),_:1}),e(r,{cols:"6"},{default:a(()=>[e(L,{modelValue:s(R).value.value,"onUpdate:modelValue":n[5]||(n[5]=l=>s(R).value.value=l),"error-messages":s(R).errorMessage.value,label:"結束時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[6]||(n[6]=l=>X("end"))},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(Ee,{modelValue:s(j).value.value,"onUpdate:modelValue":n[7]||(n[7]=l=>s(j).value.value=l),"error-messages":s(j).errorMessage.value,items:["男網","女網"],label:"網高",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(Ee,{modelValue:s(O).value.value,"onUpdate:modelValue":n[8]||(n[8]=l=>s(O).value.value=l),"error-messages":s(O).errorMessage.value,items:["A","B+","B","C","新手友善"],label:"程度",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(y,{class:"mb-1"},{default:a(()=>[e(r,null,{default:a(()=>[e(L,{modelValue:s(D).value.value,"onUpdate:modelValue":n[9]||(n[9]=l=>s(D).value.value=l),"error-messages":s(D).errorMessage.value,label:"男生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:a(()=>[e(L,{modelValue:s(se).value.value,"onUpdate:modelValue":n[10]||(n[10]=l=>s(se).value.value=l),"error-messages":s(se).errorMessage.value,label:"女生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:a(()=>[e(L,{modelValue:s(de).value.value,"onUpdate:modelValue":n[11]||(n[11]=l=>s(de).value.value=l),"error-messages":s(de).errorMessage.value,label:"不限性別人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),s(Z)["at-least-one-gender"]?(m(),_(Me,{key:0,type:"error",class:"mt-3"},{default:a(()=>[o(i(s(Z)["at-least-one-gender"]),1)]),_:1})):k("",!0)]),_:1}),e(L,{modelValue:s(ie).value.value,"onUpdate:modelValue":n[12]||(n[12]=l=>s(ie).value.value=l),"error-messages":s(ie).errorMessage.value,label:"費用",variant:"outlined",density:"compact",type:"number",required:"",placeholder:"e.g. 250"},null,8,["modelValue","error-messages"]),e(Fl,{modelValue:s(ce).value.value,"onUpdate:modelValue":n[13]||(n[13]=l=>s(ce).value.value=l),"error-messages":s(ce).errorMessage.value,label:"備註",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])]),_:1}),e(Ve,null,{default:a(()=>[s(I)?(m(),_(g,{key:0,color:"red-lighten-1",variant:"outlined",onClick:fe},{default:a(()=>[o(" 取消 ")]),_:1})):k("",!0),s(I)?(m(),_(g,{key:1,color:"teal-darken-1",type:"submit",variant:"outlined",loading:s(Y)},{default:a(()=>[o(" 送出 ")]),_:1},8,["loading"])):k("",!0),s(I)?k("",!0):(m(),_(g,{key:2,color:"red-lighten-1",variant:"outlined",size:"small",onClick:fe},{default:a(()=>[o(" 取消 ")]),_:1})),s(I)?k("",!0):(m(),_(g,{key:3,color:"teal-darken-1",type:"submit",variant:"outlined",size:"small",loading:s(Y)},{default:a(()=>[o(" 送出 ")]),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"]),e(wl,{modelValue:ee.value.open,"onUpdate:modelValue":n[15]||(n[15]=l=>ee.value.open=l),title:"確認要取消此場次嗎？",message:"此操作不可撤銷。","cancel-size":"small","confirm-size":"small",onConfirm:Ne,onCancel:Ce},null,8,["modelValue"]),e(ye,{modelValue:U.value.open,"onUpdate:modelValue":n[16]||(n[16]=l=>U.value.open=l),"max-width":"480px"},{default:a(()=>[e(W,{class:"pa-4"},{default:a(()=>[e(Se,{class:"enrollment-record-title"},{default:a(()=>[o(" 報名清單 ")]),_:1}),e(ke,null,{default:a(()=>[U.value.enrollments.length===0?(m(),_(ae,{key:0,class:"text-center text-grey-darken-2"},{default:a(()=>[o(" 尚未有人報名 ")]),_:1})):(m(),z("div",sa,[e(Me,{color:"blue-grey-lighten-1",class:"mb-4 alert-title",density:"compact",variant:"flat"},{default:a(()=>[e(T,{size:"small",icon:"mdi-information-outline",class:"pb-0 me-2"}),o(" 報名狀態 - "+i(je(U.value.session)),1)]),_:1}),e(El,null,{default:a(()=>[(m(!0),z(E,null,te(U.value.enrollments,l=>(m(),_(ze,{key:l._id},{default:a(()=>[e(Ml,null,{default:a(()=>[f("span",da,i(l.userId.name),1),o(),f("span",ia,i(l.userId.userId),1)]),_:2},1024),e(Al,{class:"mt-2 mb-4"},{default:a(()=>[o(" 電話: "+i(l.userId.phone)+" | "+i(Re(l)),1)]),_:2},1024),e(De)]),_:2},1024))),128))]),_:1})]))]),_:1}),e(Ve,null,{default:a(()=>[e(be),e(g,{color:"blue-grey-darken-2",text:"",onClick:We},{default:a(()=>[o(" 關閉 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ye,{modelValue:b.value.open,"onUpdate:modelValue":n[18]||(n[18]=l=>b.value.open=l),width:"380"},{default:a(()=>[e(W,null,{default:a(()=>[e(ke,{class:"d-flex justify-center pa-0"},{default:a(()=>[b.value.open?(m(),_(d,{key:0,modelValue:b.value.time,"onUpdate:modelValue":n[17]||(n[17]=l=>b.value.time=l),format:"24hr",color:"teal-lighten-1",scrollable:""},null,8,["modelValue"])):k("",!0)]),_:1}),e(Ve,{class:"pe-8 pb-6"},{default:a(()=>[e(be),e(g,{color:"primary",variant:"outlined",size:"small",onClick:oe},{default:a(()=>[o(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof Ie=="function"&&Ie(Fe);const Pa=bl(Fe,[["__scopeId","data-v-5d000745"]]);export{Pa as default};
