import{_ as A,i as F,r as s,ae as h,n as L,o as r,q as d,w as a,d as l,aL as M,e as N,x as R,b as y,F as V,f as U,A as x,D as q,m as D,p as G,k as Q,h as P}from"./index-8hHptxUD.js";import{P as z}from"./ProductCard-CtTOiip6.js";import{b as k}from"./route-block-B_A1xBdJ.js";import{V as H}from"./VContainer-CZCLsBgY.js";import{a as n,V as b}from"./VRow-CVLICePf.js";import{V as J}from"./VPagination-DjKNhkwX.js";import"./VHover-BWBmm0hL.js";const C=m=>(G("data-v-a63e3b39"),m=m(),Q(),m),K=C(()=>P("h2",null,"其他",-1)),O=C(()=>P("p",null,"沒有找到相關商品",-1)),w=18,S={__name:"others",setup(m){const{api:I}=q(),E=F(),o=s(1),p=s(1),i=s(""),g=s("其他"),f=s([]),v=s(!1),_=s(!1),c=async()=>{v.value=!0;try{const e={itemsPerPage:w,page:o.value,category:g.value,search:i.value},{data:t}=await I.get("/product",{params:e});if(t.success)f.value=t.result.data,p.value=Math.ceil(t.result.total/w);else throw new Error(t.message||"載入商品失敗")}catch(e){console.error("載入商品時發生錯誤:",e),E({text:e.message||"載入商品時發生錯誤",snackbarProps:{color:"red-lighten-1"}}),f.value=[],p.value=1}finally{v.value=!1}},T=(()=>{let e;return()=>{_.value=!0,clearTimeout(e),e=setTimeout(()=>{o.value=1,c(),_.value=!1},300)}})(),B=()=>{i.value="",o.value=1,c()},j=()=>{window.scrollTo({top:0,behavior:"smooth"}),c()};return h(g,()=>{o.value=1,c()}),h(i,e=>{e===""&&(o.value=1,c())}),L(()=>{c()}),(e,t)=>(r(),d(H,{class:"pa-0 h-100"},{default:a(()=>[l(b,{class:"d-flex justify-start align-start"},{default:a(()=>[l(n,{cols:"12",class:"d-flex justify-space-between pb-0"},{default:a(()=>[l(b,null,{default:a(()=>[l(n,null,{default:a(()=>[K]),_:1}),l(n,{sm:"3"},{default:a(()=>[l(M,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),variant:"outlined",density:"compact","max-width":"240","append-inner-icon":"mdi-magnify",placeholder:"搜尋商品",loading:_.value,clearable:"",onInput:N(T),"onClick:clear":B},null,8,["modelValue","loading","onInput"])]),_:1})]),_:1})]),_:1}),v.value?(r(),d(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[l(R,{indeterminate:"",color:"primary"})]),_:1})):(r(),y(V,{key:1},[(r(!0),y(V,null,U(f.value,u=>(r(),d(n,{key:u._id,cols:"6",md:"4",class:"px-0 d-flex justify-center"},{default:a(()=>[l(z,D({ref_for:!0},u),null,16)]),_:2},1024))),128)),f.value.length===0?(r(),d(n,{key:0,cols:"12",class:"text-center"},{default:a(()=>[O]),_:1})):x("",!0)],64)),p.value>1?(r(),d(n,{key:2,cols:"12"},{default:a(()=>[l(J,{modelValue:o.value,"onUpdate:modelValue":[t[1]||(t[1]=u=>o.value=u),j],length:p.value,rounded:"circle",density:"compact","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",color:"teal-darken-1"},null,8,["modelValue","length"])]),_:1})):x("",!0)]),_:1})]),_:1}))}};typeof k=="function"&&k(S);const te=A(S,[["__scopeId","data-v-a63e3b39"]]);export{te as default};
