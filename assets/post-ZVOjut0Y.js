import{bl as Je,D as Xe,J as Qe,K as Ye,aE as Ze,bm as el,a2 as ll,L as al,bn as tl,M as nl,N as ol,O as rl,bo as ul,G as sl,al as dl,c as de,a4 as il,bp as cl,aF as ml,bq as fl,a6 as vl,X as pl,br as _l,S as gl,U as yl,R as bl,T as kl,d as e,bs as Vl,V,ar as Ie,I as _,m as Fe,_ as hl,k as Cl,i as xl,r as P,l as $l,a as Pl,o as m,b as D,w as a,B as te,F as E,C as wl,j as f,g as o,ax as ne,e as s,n as g,bj as oe,z as k,f as re,q as N,x as Ce,A as ue,aN as se,aM as Tl,t as i,aK as q,aw as xe,p as zl,h as Il}from"./index-CsH3-5tR.js";import{C as Sl}from"./ConfirmDeleteDialog-25wnmFhC.js";import{c as Dl,a as w,u as El,b as T}from"./vee-validate.esm-DOUINhMw.js";import{b as Se}from"./route-block-B_A1xBdJ.js";import{V as y,a as r}from"./VRow-E_1d4W6t.js";import{V as De}from"./VDivider-rAwIeKlm.js";import{V as Ml}from"./VForm-BjbhfexC.js";import{V as Al}from"./VAutocomplete-DsOpPLx5.js";import{a as Ee,V as Fl,c as Ul,d as Nl}from"./VList-MiKTg7CD.js";import{a as Me}from"./VSelect-t9YtAFSz.js";import{V as ql}from"./VTextarea-2wqvkvxu.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./filter-D78Epu9e.js";import"./VCheckboxBtn-Hi9gK3W7.js";import"./VChip-DmmAvZVV.js";const Bl=Je("v-alert-title"),Ll=["success","info","warning","error"],Rl=Xe({border:{type:[Boolean,String],validator:u=>typeof u=="boolean"||["top","end","bottom","start"].includes(u)},borderColor:String,closable:Boolean,closeIcon:{type:Qe,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:u=>Ll.includes(u)},...Ye(),...Ze(),...el(),...ll(),...al(),...tl(),...nl(),...ol(),...rl(),...ul({variant:"flat"})},"VAlert"),Ae=sl()({name:"VAlert",props:Rl(),emits:{"click:close":u=>!0,"update:modelValue":u=>!0},setup(u,I){let{emit:H,slots:c}=I;const C=dl(u,"modelValue"),B=de(()=>{if(u.icon!==!1)return u.type?u.icon??`$${u.type}`:u.icon}),h=de(()=>({color:u.color??u.type,variant:u.variant})),{themeClasses:J}=il(u),{colorClasses:M,colorStyles:A,variantClasses:K}=cl(h),{densityClasses:b}=ml(u),{dimensionStyles:X}=fl(u),{elevationClasses:ie}=vl(u),{locationStyles:Q}=pl(u),{positionClasses:ce}=_l(u),{roundedClasses:me}=gl(u),{textColorClasses:Y,textColorStyles:G}=yl(bl(u,"borderColor")),{t:Z}=kl(),L=de(()=>({"aria-label":Z(u.closeLabel),onClick(F){C.value=!1,H("click:close",F)}}));return()=>{const F=!!(c.prepend||B.value),R=!!(c.title||u.title),j=!!(c.close||u.closable);return C.value&&e(u.tag,{class:["v-alert",u.border&&{"v-alert--border":!!u.border,[`v-alert--border-${u.border===!0?"start":u.border}`]:!0},{"v-alert--prominent":u.prominent},J.value,M.value,b.value,ie.value,ce.value,me.value,K.value,u.class],style:[A.value,X.value,Q.value,u.style],role:"alert"},{default:()=>{var O,W;return[Vl(!1,"v-alert"),u.border&&e("div",{key:"border",class:["v-alert__border",Y.value],style:G.value},null),F&&e("div",{key:"prepend",class:"v-alert__prepend"},[c.prepend?e(Ie,{key:"prepend-defaults",disabled:!B.value,defaults:{VIcon:{density:u.density,icon:B.value,size:u.prominent?44:28}}},c.prepend):e(V,{key:"prepend-icon",density:u.density,icon:B.value,size:u.prominent?44:28},null)]),e("div",{class:"v-alert__content"},[R&&e(Bl,{key:"title"},{default:()=>{var S;return[((S=c.title)==null?void 0:S.call(c))??u.title]}}),((O=c.text)==null?void 0:O.call(c))??u.text,(W=c.default)==null?void 0:W.call(c)]),c.append&&e("div",{key:"append",class:"v-alert__append"},[c.append()]),j&&e("div",{key:"close",class:"v-alert__close"},[c.close?e(Ie,{key:"close-defaults",defaults:{VBtn:{icon:u.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var S;return[(S=c.close)==null?void 0:S.call(c,{props:L.value})]}}):e(_,Fe({key:"close-btn",icon:u.closeIcon,size:"x-small",variant:"text"},L.value),null)])]}})}}}),v=u=>(zl("data-v-791c2b6f"),u=u(),Il(),u),jl={class:"opacity-90 mb-4"},Ol=v(()=>f("br",null,null,-1)),Wl=v(()=>f("br",null,null,-1)),Kl=v(()=>f("br",null,null,-1)),Gl=v(()=>f("br",null,null,-1)),Hl=v(()=>f("br",null,null,-1)),Jl=v(()=>f("br",null,null,-1)),Xl=v(()=>f("br",null,null,-1)),Ql=v(()=>f("br",null,null,-1)),Yl=v(()=>f("br",null,null,-1)),Zl=v(()=>f("br",null,null,-1)),ea=v(()=>f("br",null,null,-1)),la=v(()=>f("br",null,null,-1)),aa=v(()=>f("br",null,null,-1)),ta=v(()=>f("br",null,null,-1)),na=v(()=>f("br",null,null,-1)),oa=v(()=>f("br",null,null,-1)),ra=v(()=>f("br",null,null,-1)),ua=v(()=>f("br",null,null,-1)),sa=v(()=>f("br",null,null,-1)),da=v(()=>f("br",null,null,-1)),ia=v(()=>f("br",null,null,-1)),ca={key:1},ma={class:"enrollment-list-name"},fa={class:"enrollment-list-userId"},Ue={__name:"post",setup(u){const{mdAndUp:I,smAndUp:H}=Cl(),{apiAuth:c}=wl(),C=xl(),B=de(()=>new Date().toISOString().split("T")[0]),h=P([]),J=P([]),M=P({}),A=P({}),K=P(!1),b=P({open:!1,time:null,type:null}),X=t=>{b.value.type=t,b.value.open=!0},ie=()=>{b.value.type==="start"?R.value.value=b.value.time:j.value.value=b.value.time,b.value.open=!1,b.value.time=null},Q=()=>{b.value={open:!1,time:null,type:null}},ce=Dl({venueId:w().required("請選擇球場"),date:w().required("請選擇日期"),startTime:w().required("請輸入開始時間"),endTime:w().required("請輸入結束時間"),netheight:w().required("請選擇網高"),level:w().required("請選擇程度"),male:w().min(0,"人數不能小於0"),female:w().min(0,"人數不能小於0"),nopreference:w().min(0,"人數不能小於0"),fee:w().required("請輸入費用").min(1,"請填寫費用"),note:w()}).test("at-least-one-gender","至少需要填寫其中一性別的人數",function(t){return Number(t.male)>0||Number(t.female)>0||Number(t.nopreference)>0?!0:this.createError({path:"male",message:"三欄必填一欄人數"})}),{handleSubmit:me,isSubmitting:Y,resetForm:G,errors:Z}=El({validationSchema:ce,initialValues:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}}),L=T("venueId"),F=T("date"),R=T("startTime"),j=T("endTime"),O=T("netheight"),W=T("level"),S=T("male"),fe=T("female"),ve=T("nopreference"),pe=T("fee"),_e=T("note"),z=P({open:!1,id:null}),ee=P({open:!1}),ge=P(null),le=P({open:!1}),Ne=me(async t=>{var n,d;try{const l={...t,v_id:t.venueId,time:`${t.startTime}-${t.endTime}`,male:parseInt(t.male),female:parseInt(t.female),nopreference:parseInt(t.nopreference),fee:parseFloat(t.fee)};delete l.venueId,delete l.startTime,delete l.endTime;let p;z.value.id?p=await c.patch(`/session/${z.value.id}`,l):(p=await c.post("/session",l),console.log(p)),C({text:z.value.id?"場次編輯成功":"場次新增成功",snackbarProps:{color:"teal-darken-1"}}),ye(),Pe()}catch(l){console.error(l),C({text:((d=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:d.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}}),qe=t=>{le.value={open:!0}},Be=()=>{le.value.open=!1},ae=t=>{if(t?A.value[t._id]=!0:K.value=!0,Q(),t){z.value.id=t._id;const[n,d]=t.time.split("-");G({values:{venueId:t.v_id._id||t.v_id,date:Le(t.date),startTime:n,endTime:d,netheight:t.netheight,level:t.level,male:t.male,female:t.female,nopreference:t.nopreference,fee:t.fee,note:t.note}})}else z.value.id=null,G({values:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}});z.value.open=!0,t?A.value[t._id]=!1:K.value=!1},Le=t=>new Date(t).toISOString().split("T")[0],ye=()=>{G(),Q(),z.value.open=!1},be=t=>{ge.value=t,ee.value.open=!0},$e=()=>{ee.value.open=!1},Re=async()=>{var t,n;try{await c.delete(`/session/${ge.value}`),h.value=h.value.filter(d=>d._id!==ge.value),C({text:"場次已成功取消",snackbarProps:{color:"teal-darken-1"}}),$e()}catch(d){C({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}},Pe=async()=>{var t,n;try{const{data:d}=await c.get("/session/user");Array.isArray(d.result)?h.value=d.result:(console.error("Received data is not an array:",d),C({text:"接收到的資料格式不正確",snackbarProps:{color:"red-lighten-1"}}))}catch(d){console.error("Error loading sessions:",d),C({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"無法加載場次資料",snackbarProps:{color:"red-lighten-1"}})}},ke=t=>t&&typeof t=="object"&&t.name||"未知場地",Ve=t=>new Date(t).toLocaleDateString("zh-TW"),je=async()=>{var t,n;try{let d=[],l=1,p=!0;const $=100;for(;p;){const{data:x}=await c.get("/venue",{params:{page:l,itemsPerPage:$}});Array.isArray(x.result.data)&&x.result.data.length>0?(d=d.concat(x.result.data),x.result.data.length<$?p=!1:l++):p=!1}J.value=d.map(x=>{const Te=x.address.replace(/^\d{3,5}\s*/,"").match(/^(.+?[市縣])/),ze=Te?Te[1]:"未知地區";return{id:x._id.$oid||x._id,name:x.name,city:ze,fullName:`[${ze}] ${x.name}`}}).sort((x,we)=>x.city.localeCompare(we.city,"zh-TW"))}catch(d){console.error("Error loading venues:",d),C({text:((n=(t=d==null?void 0:d.response)==null?void 0:t.data)==null?void 0:n.message)||"無法加載球場資料",snackbarProps:{color:"red-lighten-1"}})}},Oe=(t,n,d)=>{const l=n.toLowerCase();return t.raw.fullName.toLowerCase().includes(l)||t.raw.city.toLowerCase().includes(l)||t.raw.name.toLowerCase().includes(l)},U=P({open:!1,enrollments:[],session:null}),We=t=>{const n=[];return t.male>0&&n.push(`男${t.male}人`),t.female>0&&n.push(`女${t.female}人`),t.nopreference>0&&n.push(`不限${t.nopreference}人`),n.length>0?n.join(" "):"無報名資料"},Ke=t=>{if(!t)return"無資料";const n=t.male-(t.participantMale||0),d=t.female-(t.participantFemale||0),l=t.nopreference-(t.participantNoPreference||0);if(n<=0&&d<=0&&l<=0)return"名額已滿";const p=[];return l>0&&p.push(`不限${l}人`),n>0&&p.push(`男${n}人`),d>0&&p.push(`女${d}人`),`尚需: ${p.join(" ")}`},Ge=async t=>{try{const{data:n}=await c.get(`/session/${t}`),d=h.value.findIndex(l=>l._id===t);d!==-1&&(h.value[d]=n.result)}catch(n){console.error("Error updating session data:",n),C({text:"無法更新場次資料",snackbarProps:{color:"red-lighten-1"}})}},he=async t=>{M.value[t._id]=!0;try{const n=await c.get(`/enrollment/session/${t._id}`);U.value={open:!0,enrollments:n.data.result.sort((d,l)=>new Date(d.createdAt)-new Date(l.createdAt)),session:t},await Ge(t._id)}catch(n){console.error("Error fetching enrollment records:",n),C({text:"無法獲取報名紀錄",snackbarProps:{color:"red-lighten-1"}})}finally{M.value[t._id]=!1}},He=()=>{U.value.open=!1};return $l(()=>{Pe(),je()}),(t,n)=>{const d=Pl("v-time-picker");return m(),D(E,null,[e(y,{class:"mt-4"},{default:a(()=>[e(r,{cols:"12",class:"pt-0"},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12",sm:"3"},{default:a(()=>[f("h3",jl,[o(" 刊登場次 "),e(V,{icon:"mdi-information-outline",color:"grey-darken-1",size:"x-small",class:"pb-1",onClick:qe})])]),_:1}),e(ne),e(r,{cols:"11",sm:"3"},{default:a(()=>[e(_,{block:"",elevation:"0",variant:"flat",class:"post-btn",loading:K.value,onClick:n[0]||(n[0]=l=>ae(null))},{default:a(()=>[o(" 刊登場次 ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(r,{class:"pt-0 pb-2"},{default:a(()=>[e(De)]),_:1}),s(I)?(m(),g(r,{key:0,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"15px"}},{default:a(()=>[e(r,null,{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{cols:"2"},{default:a(()=>[o(" 日期/時段 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 網高 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 程度 ")]),_:1}),e(r,null,{default:a(()=>[o(" 人數 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 費用 ")]),_:1}),e(r,null,{default:a(()=>[o(" 備註 ")]),_:1}),e(r,{cols:"1"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),h.value.length===0?(m(),g(oe,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(E,null,re(h.value,(l,p)=>(m(),g(N,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:xe({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(ke(l.v_id)),1)]),_:2},1024),e(r,{cols:"2"},{default:a(()=>[o(i(Ve(l.date))+" ",1),Ol,o(" "+i(l.time),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.netheight),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.level),1)]),_:2},1024),e(r,null,{default:a(()=>[l.male>0?(m(),D(E,{key:0},[o(" 男:"+i(l.male)+" (已報名:"+i(l.participantMale)+") ",1),Wl],64)):k("",!0),l.female>0?(m(),D(E,{key:1},[o(" 女:"+i(l.female)+" (已報名:"+i(l.participantFemale)+") ",1),Kl],64)):k("",!0),l.nopreference>0?(m(),D(E,{key:2},[o(" 不限:"+i(l.nopreference)+" (已報名:"+i(l.participantNoPreference)+") ",1)],64)):k("",!0)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[o(i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,{cols:"1"},{default:a(()=>[e(_,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2 md-btn",loading:M.value[l._id],onClick:$=>he(l)},{default:a(()=>[e(V,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),e(_,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1 md-btn",loading:A.value[l._id],onClick:$=>ae(l)},{default:a(()=>[e(V,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),e(_,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1 md-btn",onClick:$=>be(l._id.$oid||l._id)},{default:a(()=>[e(V,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!s(I)&&s(H)?(m(),g(r,{key:1,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:a(()=>[e(r,{class:"align-self-center"},{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 日期"),Gl,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 網高"),Hl,o("程度"),Jl,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 人數 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 備註 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),h.value.length===0?(m(),g(oe,{key:0,align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(E,null,re(h.value,(l,p)=>(m(),g(N,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:xe({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(ke(l.v_id)),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(Ve(l.date))+" ",1),Xl,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.netheight),1),Ql,o(" "+i(l.level),1),Yl,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[o(" 男:"+i(l.male),1),Zl,o(" 女:"+i(l.female)+" ",1),ea,o(" 不限:"+i(l.nopreference),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,null,{default:a(()=>[e(_,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",loading:M.value[l._id],onClick:$=>he(l)},{default:a(()=>[e(V,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),la,e(_,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",loading:A.value[l._id],onClick:$=>ae(l)},{default:a(()=>[e(V,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),aa,e(_,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:$=>be(l._id.$oid||l._id)},{default:a(()=>[e(V,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!s(I)&&!s(H)?(m(),g(r,{key:2,cols:"12"},{default:a(()=>[e(y,{class:"mb-4"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:a(()=>[e(r,{class:"align-self-center"},{default:a(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 日期"),ta,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 網高"),na,o("程度"),oa,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:a(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),h.value.length===0?(m(),g(oe,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:a(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(E,null,re(h.value,(l,p)=>(m(),g(N,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:xe({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:a(()=>[e(y,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:a(()=>[e(r,null,{default:a(()=>[o(i(ke(l.v_id)),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(Ve(l.date))+" ",1),ra,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:a(()=>[o(i(l.netheight),1),ua,o(" "+i(l.level),1),sa,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:a(()=>[e(_,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",loading:M.value[l._id],onClick:$=>he(l)},{default:a(()=>[e(V,{icon:"mdi-progress-check"})]),_:2},1032,["loading","onClick"]),da,e(_,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",loading:A.value[l._id],onClick:$=>ae(l)},{default:a(()=>[e(V,{icon:"mdi-pen"})]),_:2},1032,["loading","onClick"]),ia,e(_,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:$=>be(l._id.$oid||l._id)},{default:a(()=>[e(V,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0)]),_:1}),e(te,{modelValue:le.value.open,"onUpdate:modelValue":n[1]||(n[1]=l=>le.value.open=l),"max-width":"320px"},{default:a(()=>[e(N,{class:"px-2 py-5 rounded-lg"},{default:a(()=>[e(Ce,{class:"ps-6",style:{"font-size":"16px"}},{default:a(()=>[o(" 操作說明 ")]),_:1}),e(ue,{class:"pb-0"},{default:a(()=>[e(y,{style:{"font-size":"15px"}},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(V,{icon:"mdi-progress-check",color:"blue-darken-1",size:"small"}),o(" : 查看場次目前報名狀態按鈕 ")]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(V,{icon:"mdi-pen",color:"teal-darken-1",size:"small"}),o(" : 編輯場次資訊按鈕 ")]),_:1}),e(r,{cols:"12"},{default:a(()=>[e(V,{icon:"mdi-delete",color:"red-darken-3",size:"small"}),o(" : 取消場次按鈕 ")]),_:1})]),_:1})]),_:1}),e(se,null,{default:a(()=>[e(ne),e(_,{color:"teal-lighten-1",variant:"outlined",size:"small",onClick:Be},{default:a(()=>[o(" 確認 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(te,{modelValue:z.value.open,"onUpdate:modelValue":n[15]||(n[15]=l=>z.value.open=l),persistent:"",width:"440"},{default:a(()=>[e(Ml,{onSubmit:Tl(s(Ne),["prevent"])},{default:a(()=>[e(N,{class:"rounded-lg px-6 py-5"},{default:a(()=>[e(Ce,{class:"dialog-title"},{default:a(()=>[o(i(z.value.id?"編輯場次":"新增場次"),1)]),_:1}),e(ue,{class:"mt-3 pa-3"},{default:a(()=>[e(Al,{modelValue:s(L).value.value,"onUpdate:modelValue":n[2]||(n[2]=l=>s(L).value.value=l),"error-messages":s(L).errorMessage.value,items:J.value,"item-title":"fullName","item-value":"id",label:"球場",variant:"outlined",density:"compact",required:"","menu-props":{maxHeight:400},filter:Oe},{item:a(({props:l,item:p})=>[e(Ee,Fe(l,{title:p.raw.fullName}),null,16,["title"])]),_:1},8,["modelValue","error-messages","items"]),e(q,{modelValue:s(F).value.value,"onUpdate:modelValue":n[3]||(n[3]=l=>s(F).value.value=l),"error-messages":s(F).errorMessage.value,label:"日期",variant:"outlined",density:"compact",type:"date",required:"",min:B.value},null,8,["modelValue","error-messages","min"]),e(y,null,{default:a(()=>[e(r,{cols:"6"},{default:a(()=>[e(q,{modelValue:s(R).value.value,"onUpdate:modelValue":n[4]||(n[4]=l=>s(R).value.value=l),"error-messages":s(R).errorMessage.value,label:"開始時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[5]||(n[5]=l=>X("start"))},null,8,["modelValue","error-messages"])]),_:1}),e(r,{cols:"6"},{default:a(()=>[e(q,{modelValue:s(j).value.value,"onUpdate:modelValue":n[6]||(n[6]=l=>s(j).value.value=l),"error-messages":s(j).errorMessage.value,label:"結束時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[7]||(n[7]=l=>X("end"))},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(Me,{modelValue:s(O).value.value,"onUpdate:modelValue":n[8]||(n[8]=l=>s(O).value.value=l),"error-messages":s(O).errorMessage.value,items:["男網","女網"],label:"網高",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(Me,{modelValue:s(W).value.value,"onUpdate:modelValue":n[9]||(n[9]=l=>s(W).value.value=l),"error-messages":s(W).errorMessage.value,items:["A","B+","B","C","新手友善"],label:"程度",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(y,{class:"mb-1"},{default:a(()=>[e(r,null,{default:a(()=>[e(q,{modelValue:s(S).value.value,"onUpdate:modelValue":n[10]||(n[10]=l=>s(S).value.value=l),"error-messages":s(S).errorMessage.value,label:"男生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:a(()=>[e(q,{modelValue:s(fe).value.value,"onUpdate:modelValue":n[11]||(n[11]=l=>s(fe).value.value=l),"error-messages":s(fe).errorMessage.value,label:"女生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:a(()=>[e(q,{modelValue:s(ve).value.value,"onUpdate:modelValue":n[12]||(n[12]=l=>s(ve).value.value=l),"error-messages":s(ve).errorMessage.value,label:"不限性別人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),s(Z)["at-least-one-gender"]?(m(),g(Ae,{key:0,type:"error",class:"mt-3"},{default:a(()=>[o(i(s(Z)["at-least-one-gender"]),1)]),_:1})):k("",!0)]),_:1}),e(q,{modelValue:s(pe).value.value,"onUpdate:modelValue":n[13]||(n[13]=l=>s(pe).value.value=l),"error-messages":s(pe).errorMessage.value,label:"費用",variant:"outlined",density:"compact",type:"number",required:"",placeholder:"e.g. 250"},null,8,["modelValue","error-messages"]),e(ql,{modelValue:s(_e).value.value,"onUpdate:modelValue":n[14]||(n[14]=l=>s(_e).value.value=l),"error-messages":s(_e).errorMessage.value,label:"備註",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])]),_:1}),e(se,null,{default:a(()=>[s(I)?(m(),g(_,{key:0,color:"red-lighten-1",variant:"outlined",onClick:ye},{default:a(()=>[o(" 取消 ")]),_:1})):k("",!0),s(I)?(m(),g(_,{key:1,color:"teal-darken-1",type:"submit",variant:"outlined",loading:s(Y)},{default:a(()=>[o(" 送出 ")]),_:1},8,["loading"])):k("",!0),s(I)?k("",!0):(m(),g(_,{key:2,color:"red-lighten-1",variant:"outlined",size:"small",onClick:ye},{default:a(()=>[o(" 取消 ")]),_:1})),s(I)?k("",!0):(m(),g(_,{key:3,color:"teal-darken-1",type:"submit",variant:"outlined",size:"small",loading:s(Y)},{default:a(()=>[o(" 送出 ")]),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"]),e(Sl,{modelValue:ee.value.open,"onUpdate:modelValue":n[16]||(n[16]=l=>ee.value.open=l),title:"確認要取消此場次嗎？",message:"此操作不可撤銷。","cancel-size":"small","confirm-size":"small",onConfirm:Re,onCancel:$e},null,8,["modelValue"]),e(te,{modelValue:U.value.open,"onUpdate:modelValue":n[17]||(n[17]=l=>U.value.open=l),"max-width":"480px"},{default:a(()=>[e(N,{class:"pa-4"},{default:a(()=>[e(Ce,{class:"enrollment-record-title"},{default:a(()=>[o(" 報名清單 ")]),_:1}),e(ue,null,{default:a(()=>[U.value.enrollments.length===0?(m(),g(oe,{key:0,class:"text-center text-grey-darken-2"},{default:a(()=>[o(" 尚未有人報名 ")]),_:1})):(m(),D("div",ca,[e(Ae,{color:"blue-grey-lighten-1",class:"mb-4 alert-title",density:"compact",variant:"flat"},{default:a(()=>[e(V,{size:"small",icon:"mdi-information-outline",class:"pb-0 me-2"}),o(" 報名狀態 - "+i(Ke(U.value.session)),1)]),_:1}),e(Fl,null,{default:a(()=>[(m(!0),D(E,null,re(U.value.enrollments,l=>(m(),g(Ee,{key:l._id},{default:a(()=>[e(Ul,null,{default:a(()=>[f("span",ma,i(l.userId.name),1),o(),f("span",fa,i(l.userId.userId),1)]),_:2},1024),e(Nl,{class:"mt-2 mb-4"},{default:a(()=>[o(" 電話: "+i(l.userId.phone)+" | "+i(We(l)),1)]),_:2},1024),e(De)]),_:2},1024))),128))]),_:1})]))]),_:1}),e(se,null,{default:a(()=>[e(ne),e(_,{color:"blue-grey-darken-2",text:"",onClick:He},{default:a(()=>[o(" 關閉 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(te,{modelValue:b.value.open,"onUpdate:modelValue":n[19]||(n[19]=l=>b.value.open=l),width:"380"},{default:a(()=>[e(N,null,{default:a(()=>[e(ue,{class:"d-flex justify-center pa-0"},{default:a(()=>[b.value.open?(m(),g(d,{key:0,modelValue:b.value.time,"onUpdate:modelValue":n[18]||(n[18]=l=>b.value.time=l),format:"24hr",color:"teal-lighten-1",scrollable:""},null,8,["modelValue"])):k("",!0)]),_:1}),e(se,{class:"pe-8 pb-6"},{default:a(()=>[e(ne),e(_,{color:"primary",variant:"outlined",size:"small",onClick:ie},{default:a(()=>[o(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof Se=="function"&&Se(Ue);const za=hl(Ue,[["__scopeId","data-v-791c2b6f"]]);export{za as default};
