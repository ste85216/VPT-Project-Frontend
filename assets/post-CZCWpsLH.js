import{bl as je,D as Oe,J as We,K as Ke,aE as Ge,bm as He,a2 as Je,L as Xe,bn as Qe,M as Ye,N as Ze,O as el,bo as ll,G as tl,al,c as ne,a4 as nl,bp as ol,aF as rl,bq as sl,a6 as ul,X as dl,br as il,S as cl,U as ml,R as fl,T as vl,d as e,bs as pl,V as T,ar as $e,I as g,m as ze,_ as _l,k as gl,i as yl,r as F,l as bl,a as kl,b as D,w as t,B as pe,F as z,C as Vl,o as m,ax as _e,g as o,e as u,n as _,bj as te,z as k,f as ae,aM as hl,q as R,x as Pe,t as i,A as ge,aK as U,aN as ye,aw as be,j as f,p as Cl,h as xl}from"./index-C6cL9OSD.js";import{C as $l}from"./ConfirmDeleteDialog-CpjcEyGO.js";import{c as Pl,a as $,u as Tl,b as P}from"./vee-validate.esm-DdKzlaRi.js";import{b as Te}from"./route-block-B_A1xBdJ.js";import{V as y,a as r}from"./VRow-DYqpX0um.js";import{V as we}from"./VDivider-DcjYT5c7.js";import{V as wl}from"./VForm-DtFDkBpj.js";import{V as Sl}from"./VAutocomplete-CAM8_Cf2.js";import{a as Se,V as Il,c as Dl,d as zl}from"./VList-BxbXQs34.js";import{a as Ie}from"./VSelect-QvA8zxRg.js";import{V as El}from"./VTextarea-BnwoeDCh.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./filter-F68q9Eys.js";import"./VCheckboxBtn-CWrkG6Mw.js";import"./VChip-u5q67Wmg.js";const Ml=je("v-alert-title"),Al=["success","info","warning","error"],Fl=Oe({border:{type:[Boolean,String],validator:s=>typeof s=="boolean"||["top","end","bottom","start"].includes(s)},borderColor:String,closable:Boolean,closeIcon:{type:We,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:s=>Al.includes(s)},...Ke(),...Ge(),...He(),...Je(),...Xe(),...Qe(),...Ye(),...Ze(),...el(),...ll({variant:"flat"})},"VAlert"),De=tl()({name:"VAlert",props:Fl(),emits:{"click:close":s=>!0,"update:modelValue":s=>!0},setup(s,S){let{emit:J,slots:c}=S;const h=al(s,"modelValue"),L=ne(()=>{if(s.icon!==!1)return s.type?s.icon??`$${s.type}`:s.icon}),V=ne(()=>({color:s.color??s.type,variant:s.variant})),{themeClasses:j}=nl(s),{colorClasses:b,colorStyles:X,variantClasses:oe}=ol(V),{densityClasses:Q}=rl(s),{dimensionStyles:re}=sl(s),{elevationClasses:se}=ul(s),{locationStyles:Y}=dl(s),{positionClasses:O}=il(s),{roundedClasses:Z}=cl(s),{textColorClasses:W,textColorStyles:K}=ml(fl(s,"borderColor")),{t:q}=vl(),E=ne(()=>({"aria-label":q(s.closeLabel),onClick(M){h.value=!1,J("click:close",M)}}));return()=>{const M=!!(c.prepend||L.value),G=!!(c.title||s.title),H=!!(c.close||s.closable);return h.value&&e(s.tag,{class:["v-alert",s.border&&{"v-alert--border":!!s.border,[`v-alert--border-${s.border===!0?"start":s.border}`]:!0},{"v-alert--prominent":s.prominent},j.value,b.value,Q.value,se.value,O.value,Z.value,oe.value,s.class],style:[X.value,re.value,Y.value,s.style],role:"alert"},{default:()=>{var B,N;return[pl(!1,"v-alert"),s.border&&e("div",{key:"border",class:["v-alert__border",W.value],style:K.value},null),M&&e("div",{key:"prepend",class:"v-alert__prepend"},[c.prepend?e($e,{key:"prepend-defaults",disabled:!L.value,defaults:{VIcon:{density:s.density,icon:L.value,size:s.prominent?44:28}}},c.prepend):e(T,{key:"prepend-icon",density:s.density,icon:L.value,size:s.prominent?44:28},null)]),e("div",{class:"v-alert__content"},[G&&e(Ml,{key:"title"},{default:()=>{var I;return[((I=c.title)==null?void 0:I.call(c))??s.title]}}),((B=c.text)==null?void 0:B.call(c))??s.text,(N=c.default)==null?void 0:N.call(c)]),c.append&&e("div",{key:"append",class:"v-alert__append"},[c.append()]),H&&e("div",{key:"close",class:"v-alert__close"},[c.close?e($e,{key:"close-defaults",defaults:{VBtn:{icon:s.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var I;return[(I=c.close)==null?void 0:I.call(c,{props:E.value})]}}):e(g,ze({key:"close-btn",icon:s.closeIcon,size:"x-small",variant:"text"},E.value),null)])]}})}}}),v=s=>(Cl("data-v-f4b83b1e"),s=s(),xl(),s),Ul=v(()=>f("h3",{class:"opacity-90 mb-4"}," 刊登列表 ",-1)),Ll=v(()=>f("br",null,null,-1)),ql=v(()=>f("br",null,null,-1)),Bl=v(()=>f("br",null,null,-1)),Nl=v(()=>f("br",null,null,-1)),Rl=v(()=>f("br",null,null,-1)),jl=v(()=>f("br",null,null,-1)),Ol=v(()=>f("br",null,null,-1)),Wl=v(()=>f("br",null,null,-1)),Kl=v(()=>f("br",null,null,-1)),Gl=v(()=>f("br",null,null,-1)),Hl=v(()=>f("br",null,null,-1)),Jl=v(()=>f("br",null,null,-1)),Xl=v(()=>f("br",null,null,-1)),Ql=v(()=>f("br",null,null,-1)),Yl=v(()=>f("br",null,null,-1)),Zl=v(()=>f("br",null,null,-1)),et=v(()=>f("br",null,null,-1)),lt=v(()=>f("br",null,null,-1)),tt=v(()=>f("br",null,null,-1)),at=v(()=>f("br",null,null,-1)),nt=v(()=>f("br",null,null,-1)),ot={key:1},rt={class:"enrollment-list-name"},st={class:"enrollment-list-userId"},Ee={__name:"post",setup(s){const{mdAndUp:S,smAndUp:J}=gl(),{apiAuth:c}=Vl(),h=yl(),L=ne(()=>new Date().toISOString().split("T")[0]),V=F([]),j=F([]),b=F({open:!1,time:null,type:null}),X=a=>{b.value.type=a,b.value.open=!0},oe=()=>{b.value.type==="start"?q.value.value=b.value.time:E.value.value=b.value.time,b.value.open=!1,b.value.time=null},Q=()=>{b.value={open:!1,time:null,type:null}},re=Pl({venueId:$().required("請選擇球場"),date:$().required("請選擇日期"),startTime:$().required("請輸入開始時間"),endTime:$().required("請輸入結束時間"),netheight:$().required("請選擇網高"),level:$().required("請選擇程度"),male:$().min(0,"人數不能小於0"),female:$().min(0,"人數不能小於0"),nopreference:$().min(0,"人數不能小於0"),fee:$().required("請輸入費用").min(1,"請填寫費用"),note:$()}).test("at-least-one-gender","至少需要填寫其中一性別的人數",function(a){return Number(a.male)>0||Number(a.female)>0||Number(a.nopreference)>0?!0:this.createError({path:"male",message:"三欄必填一欄人數"})}),{handleSubmit:se,isSubmitting:Y,resetForm:O,errors:Z}=Tl({validationSchema:re,initialValues:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}}),W=P("venueId"),K=P("date"),q=P("startTime"),E=P("endTime"),M=P("netheight"),G=P("level"),H=P("male"),B=P("female"),N=P("nopreference"),I=P("fee"),ue=P("note"),w=F({open:!1,id:null}),ee=F({open:!1}),de=F(null),Me=se(async a=>{var n,d;try{const l={...a,v_id:a.venueId,time:`${a.startTime}-${a.endTime}`,male:parseInt(a.male),female:parseInt(a.female),nopreference:parseInt(a.nopreference),fee:parseFloat(a.fee)};delete l.venueId,delete l.startTime,delete l.endTime;let p;w.value.id?p=await c.patch(`/session/${w.value.id}`,l):(p=await c.post("/session",l),console.log(p)),h({text:w.value.id?"場次編輯成功":"場次新增成功",snackbarProps:{color:"teal-darken-1"}}),ie(),Ve()}catch(l){console.error(l),h({text:((d=(n=l==null?void 0:l.response)==null?void 0:n.data)==null?void 0:d.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}}),le=a=>{if(Q(),a){w.value.id=a._id;const[n,d]=a.time.split("-");O({values:{venueId:a.v_id._id||a.v_id,date:Ae(a.date),startTime:n,endTime:d,netheight:a.netheight,level:a.level,male:a.male,female:a.female,nopreference:a.nopreference,fee:a.fee,note:a.note}})}else w.value.id=null,O({values:{venueId:"",date:"",startTime:"",endTime:"",netheight:"",level:"",male:0,female:0,nopreference:0,fee:0,note:""}});w.value.open=!0},Ae=a=>new Date(a).toISOString().split("T")[0],ie=()=>{O(),Q(),w.value.open=!1},ce=a=>{de.value=a,ee.value.open=!0},ke=()=>{ee.value.open=!1},Fe=async()=>{var a,n;try{await c.delete(`/session/${de.value}`),V.value=V.value.filter(d=>d._id!==de.value),h({text:"場次已成功取消",snackbarProps:{color:"teal-darken-1"}}),ke()}catch(d){h({text:((n=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:n.message)||"操作失敗",snackbarProps:{color:"red-lighten-1"}})}},Ve=async()=>{var a,n;try{const{data:d}=await c.get("/session/user");Array.isArray(d.result)?V.value=d.result:(console.error("Received data is not an array:",d),h({text:"接收到的資料格式不正確",snackbarProps:{color:"red-lighten-1"}}))}catch(d){console.error("Error loading sessions:",d),h({text:((n=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:n.message)||"無法加載場次資料",snackbarProps:{color:"red-lighten-1"}})}},me=a=>a&&typeof a=="object"&&a.name||"未知場地",fe=a=>new Date(a).toLocaleDateString("zh-TW"),Ue=async()=>{var a,n;try{let d=[],l=1,p=!0;const x=100;for(;p;){const{data:C}=await c.get("/venue",{params:{page:l,itemsPerPage:x}});Array.isArray(C.result.data)&&C.result.data.length>0?(d=d.concat(C.result.data),C.result.data.length<x?p=!1:l++):p=!1}j.value=d.map(C=>{const Ce=C.address.replace(/^\d{3,5}\s*/,"").match(/^(.+?[市縣])/),xe=Ce?Ce[1]:"未知地區";return{id:C._id.$oid||C._id,name:C.name,city:xe,fullName:`[${xe}] ${C.name}`}}).sort((C,he)=>C.city.localeCompare(he.city,"zh-TW")),console.log(`Loaded ${j.value.length} venues`)}catch(d){console.error("Error loading venues:",d),h({text:((n=(a=d==null?void 0:d.response)==null?void 0:a.data)==null?void 0:n.message)||"無法加載球場資料",snackbarProps:{color:"red-lighten-1"}})}},Le=(a,n,d)=>{const l=n.toLowerCase();return a.raw.fullName.toLowerCase().includes(l)||a.raw.city.toLowerCase().includes(l)||a.raw.name.toLowerCase().includes(l)},A=F({open:!1,enrollments:[],session:null}),qe=a=>{const n=[];return a.male>0&&n.push(`男${a.male}人`),a.female>0&&n.push(`女${a.female}人`),a.nopreference>0&&n.push(`不限${a.nopreference}人`),n.length>0?n.join(" "):"無報名資料"},Be=a=>{if(!a)return"無資料";const n=a.male-(a.participantMale||0),d=a.female-(a.participantFemale||0),l=a.nopreference-(a.participantNoPreference||0);if(n<=0&&d<=0&&l<=0)return"名額已滿";const p=[];return l>0&&p.push(`不限${l}人`),n>0&&p.push(`男${n}人`),d>0&&p.push(`女${d}人`),`尚需: ${p.join(" ")}`},Ne=async a=>{try{const{data:n}=await c.get(`/session/${a}`),d=V.value.findIndex(l=>l._id===a);d!==-1&&(V.value[d]=n.result)}catch(n){console.error("Error updating session data:",n),h({text:"無法更新場次資料",snackbarProps:{color:"red-lighten-1"}})}},ve=async a=>{try{const n=await c.get(`/enrollment/session/${a._id}`);A.value={open:!0,enrollments:n.data.result.sort((d,l)=>new Date(d.createdAt)-new Date(l.createdAt)),session:a},await Ne(a._id)}catch(n){console.error("Error fetching enrollment records:",n),h({text:"無法獲取報名紀錄",snackbarProps:{color:"red-lighten-1"}})}},Re=()=>{A.value.open=!1};return bl(()=>{Ve(),Ue()}),(a,n)=>{const d=kl("v-time-picker");return m(),D(z,null,[e(y,{class:"mt-4"},{default:t(()=>[e(r,{cols:"12",class:"pt-0"},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{cols:"12",sm:"3"},{default:t(()=>[Ul]),_:1}),e(_e),e(r,{cols:"12",sm:"3"},{default:t(()=>[e(g,{block:"",elevation:"0",variant:"flat",class:"post-btn",onClick:n[0]||(n[0]=l=>le(null))},{default:t(()=>[o(" 刊登場次 ")]),_:1})]),_:1})]),_:1})]),_:1}),e(r,{class:"pt-0 pb-2"},{default:t(()=>[e(we)]),_:1}),u(S)?(m(),_(r,{key:0,cols:"12"},{default:t(()=>[e(y,{class:"mb-4"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"15px"}},{default:t(()=>[e(r,null,{default:t(()=>[o(" 球場 ")]),_:1}),e(r,{cols:"2"},{default:t(()=>[o(" 日期/時段 ")]),_:1}),e(r,{cols:"1"},{default:t(()=>[o(" 網高 ")]),_:1}),e(r,{cols:"1"},{default:t(()=>[o(" 程度 ")]),_:1}),e(r,null,{default:t(()=>[o(" 人數 ")]),_:1}),e(r,{cols:"1"},{default:t(()=>[o(" 費用 ")]),_:1}),e(r,null,{default:t(()=>[o(" 備註 ")]),_:1}),e(r,{cols:"1"},{default:t(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(te,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:t(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(z,null,ae(V.value,(l,p)=>(m(),_(R,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:be({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:t(()=>[e(r,null,{default:t(()=>[o(i(me(l.v_id)),1)]),_:2},1024),e(r,{cols:"2"},{default:t(()=>[o(i(fe(l.date))+" ",1),Ll,o(" "+i(l.time),1)]),_:2},1024),e(r,{cols:"1"},{default:t(()=>[o(i(l.netheight),1)]),_:2},1024),e(r,{cols:"1"},{default:t(()=>[o(i(l.level),1)]),_:2},1024),e(r,null,{default:t(()=>[l.male>0?(m(),D(z,{key:0},[o(" 男:"+i(l.male)+" (已報名:"+i(l.participantMale)+") ",1),ql],64)):k("",!0),l.female>0?(m(),D(z,{key:1},[o(" 女:"+i(l.female)+" (已報名:"+i(l.participantFemale)+") ",1),Bl],64)):k("",!0),l.nopreference>0?(m(),D(z,{key:2},[o(" 不限:"+i(l.nopreference)+" (已報名:"+i(l.participantNoPreference)+") ",1)],64)):k("",!0)]),_:2},1024),e(r,{cols:"1"},{default:t(()=>[o(i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,{cols:"1"},{default:t(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",onClick:x=>ve(l)},{default:t(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["onClick"]),e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",onClick:x=>le(l)},{default:t(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["onClick"]),e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:x=>ce(l._id.$oid||l._id)},{default:t(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!u(S)&&u(J)?(m(),_(r,{key:1,cols:"12"},{default:t(()=>[e(y,{class:"mb-4"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:t(()=>[e(r,{class:"align-self-center"},{default:t(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 日期"),Nl,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 網高"),Rl,o("程度"),jl,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 人數 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 備註 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(te,{key:0,align:"center",class:"opacity-80"},{default:t(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(z,null,ae(V.value,(l,p)=>(m(),_(R,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:be({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:t(()=>[e(r,null,{default:t(()=>[o(i(me(l.v_id)),1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(fe(l.date))+" ",1),Ol,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(l.netheight),1),Wl,o(" "+i(l.level),1),Kl,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:t(()=>[o(" 男:"+i(l.male),1),Gl,o(" 女:"+i(l.female)+" ",1),Hl,o(" 不限:"+i(l.nopreference),1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(l.note||"無備註"),1)]),_:2},1024),e(r,null,{default:t(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",onClick:x=>ve(l)},{default:t(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["onClick"]),Jl,e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",onClick:x=>le(l)},{default:t(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["onClick"]),Xl,e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:x=>ce(l._id.$oid||l._id)},{default:t(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0),!u(S)&&!u(J)?(m(),_(r,{key:2,cols:"12"},{default:t(()=>[e(y,{class:"mb-4"},{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"px-4 text-center",style:{"font-size":"14px"}},{default:t(()=>[e(r,{class:"align-self-center"},{default:t(()=>[o(" 球場 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 日期"),Ql,o("時段 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 網高"),Yl,o("程度"),Zl,o("費用 ")]),_:1}),e(r,{class:"align-self-center"},{default:t(()=>[o(" 操作 ")]),_:1})]),_:1})]),_:1})]),_:1}),V.value.length===0?(m(),_(te,{key:0,height:"100%",align:"center",class:"opacity-80"},{default:t(()=>[o(" 目前您沒有刊登任何場次 ")]),_:1})):k("",!0),(m(!0),D(z,null,ae(V.value,(l,p)=>(m(),_(R,{key:l._id.$oid||l._id,elevation:"0",class:"pa-4 py-8 post-card",style:be({backgroundColor:p%2===0?"#f0f0f080":"#EFEBE990"})},{default:t(()=>[e(y,null,{default:t(()=>[e(r,{cols:"12"},{default:t(()=>[e(y,{class:"align-center text-center text-blue-grey-darken-2",style:{"font-size":"13px","font-weight":"500"}},{default:t(()=>[e(r,null,{default:t(()=>[o(i(me(l.v_id)),1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(fe(l.date))+" ",1),et,o(" "+i(l.time),1)]),_:2},1024),e(r,null,{default:t(()=>[o(i(l.netheight),1),lt,o(" "+i(l.level),1),tt,o(" "+i(l.fee)+"/人 ",1)]),_:2},1024),e(r,null,{default:t(()=>[e(g,{size:"x-small",color:"blue-darken-3",variant:"outlined",class:"mt-2",onClick:x=>ve(l)},{default:t(()=>[e(T,{icon:"mdi-progress-check"})]),_:2},1032,["onClick"]),at,e(g,{size:"x-small",color:"teal-darken-1",variant:"outlined",class:"mt-1",onClick:x=>le(l)},{default:t(()=>[e(T,{icon:"mdi-pen"})]),_:2},1032,["onClick"]),nt,e(g,{size:"x-small",color:"red-darken-3",variant:"outlined",class:"mt-1",onClick:x=>ce(l._id.$oid||l._id)},{default:t(()=>[e(T,{icon:"mdi-delete"})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["style"]))),128))]),_:1})):k("",!0)]),_:1}),e(pe,{modelValue:w.value.open,"onUpdate:modelValue":n[14]||(n[14]=l=>w.value.open=l),persistent:"",width:"440"},{default:t(()=>[e(wl,{onSubmit:hl(u(Me),["prevent"])},{default:t(()=>[e(R,{class:"rounded-lg px-6 py-5"},{default:t(()=>[e(Pe,{class:"dialog-title"},{default:t(()=>[o(i(w.value.id?"編輯場次":"新增場次"),1)]),_:1}),e(ge,{class:"mt-3 pa-3"},{default:t(()=>[e(Sl,{modelValue:u(W).value.value,"onUpdate:modelValue":n[1]||(n[1]=l=>u(W).value.value=l),"error-messages":u(W).errorMessage.value,items:j.value,"item-title":"fullName","item-value":"id",label:"球場",variant:"outlined",density:"compact",required:"","menu-props":{maxHeight:400},filter:Le},{item:t(({props:l,item:p})=>[e(Se,ze(l,{title:p.raw.fullName}),null,16,["title"])]),_:1},8,["modelValue","error-messages","items"]),e(U,{modelValue:u(K).value.value,"onUpdate:modelValue":n[2]||(n[2]=l=>u(K).value.value=l),"error-messages":u(K).errorMessage.value,label:"日期",variant:"outlined",density:"compact",type:"date",required:"",min:L.value},null,8,["modelValue","error-messages","min"]),e(y,null,{default:t(()=>[e(r,{cols:"6"},{default:t(()=>[e(U,{modelValue:u(q).value.value,"onUpdate:modelValue":n[3]||(n[3]=l=>u(q).value.value=l),"error-messages":u(q).errorMessage.value,label:"開始時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[4]||(n[4]=l=>X("start"))},null,8,["modelValue","error-messages"])]),_:1}),e(r,{cols:"6"},{default:t(()=>[e(U,{modelValue:u(E).value.value,"onUpdate:modelValue":n[5]||(n[5]=l=>u(E).value.value=l),"error-messages":u(E).errorMessage.value,label:"結束時間",variant:"outlined",density:"compact",readonly:"",clearable:"",onClick:n[6]||(n[6]=l=>X("end"))},null,8,["modelValue","error-messages"])]),_:1})]),_:1}),e(Ie,{modelValue:u(M).value.value,"onUpdate:modelValue":n[7]||(n[7]=l=>u(M).value.value=l),"error-messages":u(M).errorMessage.value,items:["男網","女網"],label:"網高",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(Ie,{modelValue:u(G).value.value,"onUpdate:modelValue":n[8]||(n[8]=l=>u(G).value.value=l),"error-messages":u(G).errorMessage.value,items:["A","B+","B","C","新手友善"],label:"程度",variant:"outlined",density:"compact",required:""},null,8,["modelValue","error-messages"]),e(y,{class:"mb-1"},{default:t(()=>[e(r,null,{default:t(()=>[e(U,{modelValue:u(H).value.value,"onUpdate:modelValue":n[9]||(n[9]=l=>u(H).value.value=l),"error-messages":u(H).errorMessage.value,label:"男生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:t(()=>[e(U,{modelValue:u(B).value.value,"onUpdate:modelValue":n[10]||(n[10]=l=>u(B).value.value=l),"error-messages":u(B).errorMessage.value,label:"女生人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),e(r,null,{default:t(()=>[e(U,{modelValue:u(N).value.value,"onUpdate:modelValue":n[11]||(n[11]=l=>u(N).value.value=l),"error-messages":u(N).errorMessage.value,label:"不限性別人數",variant:"outlined",density:"compact",type:"number",required:""},null,8,["modelValue","error-messages"])]),_:1}),u(Z)["at-least-one-gender"]?(m(),_(De,{key:0,type:"error",class:"mt-3"},{default:t(()=>[o(i(u(Z)["at-least-one-gender"]),1)]),_:1})):k("",!0)]),_:1}),e(U,{modelValue:u(I).value.value,"onUpdate:modelValue":n[12]||(n[12]=l=>u(I).value.value=l),"error-messages":u(I).errorMessage.value,label:"費用",variant:"outlined",density:"compact",type:"number",required:"",placeholder:"e.g. 250"},null,8,["modelValue","error-messages"]),e(El,{modelValue:u(ue).value.value,"onUpdate:modelValue":n[13]||(n[13]=l=>u(ue).value.value=l),"error-messages":u(ue).errorMessage.value,label:"備註",variant:"outlined",density:"compact"},null,8,["modelValue","error-messages"])]),_:1}),e(ye,null,{default:t(()=>[u(S)?(m(),_(g,{key:0,color:"red-lighten-1",variant:"outlined",onClick:ie},{default:t(()=>[o(" 取消 ")]),_:1})):k("",!0),u(S)?(m(),_(g,{key:1,color:"teal-darken-1",type:"submit",variant:"outlined",loading:u(Y)},{default:t(()=>[o(" 送出 ")]),_:1},8,["loading"])):k("",!0),u(S)?k("",!0):(m(),_(g,{key:2,color:"red-lighten-1",variant:"outlined",size:"small",onClick:ie},{default:t(()=>[o(" 取消 ")]),_:1})),u(S)?k("",!0):(m(),_(g,{key:3,color:"teal-darken-1",type:"submit",variant:"outlined",size:"small",loading:u(Y)},{default:t(()=>[o(" 送出 ")]),_:1},8,["loading"]))]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1},8,["modelValue"]),e($l,{modelValue:ee.value.open,"onUpdate:modelValue":n[15]||(n[15]=l=>ee.value.open=l),title:"確認要取消此場次嗎？",message:"此操作不可撤銷。","cancel-size":"small","confirm-size":"small",onConfirm:Fe,onCancel:ke},null,8,["modelValue"]),e(pe,{modelValue:A.value.open,"onUpdate:modelValue":n[16]||(n[16]=l=>A.value.open=l),"max-width":"480px"},{default:t(()=>[e(R,{class:"pa-4"},{default:t(()=>[e(Pe,{class:"enrollment-record-title"},{default:t(()=>[o(" 報名清單 ")]),_:1}),e(ge,null,{default:t(()=>[A.value.enrollments.length===0?(m(),_(te,{key:0,class:"text-center text-grey-darken-2"},{default:t(()=>[o(" 尚未有人報名 ")]),_:1})):(m(),D("div",ot,[e(De,{color:"blue-grey-lighten-1",class:"mb-4 alert-title",density:"compact",variant:"flat"},{default:t(()=>[e(T,{size:"small",icon:"mdi-information-outline",class:"pb-0 me-2"}),o(" 報名狀態 - "+i(Be(A.value.session)),1)]),_:1}),e(Il,null,{default:t(()=>[(m(!0),D(z,null,ae(A.value.enrollments,l=>(m(),_(Se,{key:l._id},{default:t(()=>[e(Dl,null,{default:t(()=>[f("span",rt,i(l.userId.name),1),o(),f("span",st,i(l.userId.userId),1)]),_:2},1024),e(zl,{class:"mt-2 mb-4"},{default:t(()=>[o(" 電話: "+i(l.userId.phone)+" | "+i(qe(l)),1)]),_:2},1024),e(we)]),_:2},1024))),128))]),_:1})]))]),_:1}),e(ye,null,{default:t(()=>[e(_e),e(g,{color:"blue-grey-darken-2",text:"",onClick:Re},{default:t(()=>[o(" 關閉 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(pe,{modelValue:b.value.open,"onUpdate:modelValue":n[18]||(n[18]=l=>b.value.open=l),width:"380"},{default:t(()=>[e(R,null,{default:t(()=>[e(ge,{class:"d-flex justify-center pa-0"},{default:t(()=>[b.value.open?(m(),_(d,{key:0,modelValue:b.value.time,"onUpdate:modelValue":n[17]||(n[17]=l=>b.value.time=l),format:"24hr",color:"teal-lighten-1",scrollable:""},null,8,["modelValue"])):k("",!0)]),_:1}),e(ye,{class:"pe-8 pb-6"},{default:t(()=>[e(_e),e(g,{color:"primary",variant:"outlined",size:"small",onClick:oe},{default:t(()=>[o(" 確定 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};typeof Te=="function"&&Te(Ee);const Ct=_l(Ee,[["__scopeId","data-v-f4b83b1e"]]);export{Ct as default};
