import{_ as re,l as ne,bi as ue,u as ie,i as de,r as U,n as me,o as N,b as pe,e,q as H,w as t,A as K,az as ce,D as ge,d as l,aN as $,aL as r,J as j,g as f,h as p,p as ve,k as fe}from"./index-8hHptxUD.js";import{v as C}from"./index-DcBOdE6S.js";import{c as Q,a as d,g as be,u as W,b as m}from"./vee-validate.esm-Cv-i_ivi.js";import{V as u}from"./VContainer-CZCLsBgY.js";import{V as i,a as n}from"./VRow-CVLICePf.js";import{V as A}from"./VForm-BGQH8yip.js";import{V as Y}from"./VCheckbox-DeaHG-O4.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-MD6kzpme.js";const T=_=>(ve("data-v-6a229189"),_=_(),fe(),_),ye={id:"background",class:"d-flex justify-center align-center"},Ve=T(()=>p("div",{class:"title text-center"}," 登入 ",-1)),xe=T(()=>p("div",{class:"title text-center"}," 立即註冊 ",-1)),he={class:"sm-wrapper"},we=T(()=>p("div",{class:"title text-center"}," 登入 ",-1)),Se=T(()=>p("div",{class:"title text-center"}," 立即註冊 ",-1)),ke={__name:"loginregister",setup(_){const{smAndUp:q}=ne(),{api:Z}=ge(),D=ue(),X=ie(),I=de(),B=U(!0),c=U(!1),g=U(!1),v=U(!1),y=U(!1),E=()=>{if(q.value){const o=document.querySelector(".login"),a=document.querySelector(".register"),s=document.querySelector("#login-register");s.style.height="800px",o.style.transform="translateX(-420px)",a.style.transform="translateX(-420px)"}else B.value=!1;oe()},z=()=>{if(q.value){const o=document.querySelector(".login"),a=document.querySelector(".register"),s=document.querySelector("#login-register");s.style.height="440px",o.style.transform="translateX(0)",a.style.transform="translateX(0)"}else B.value=!0;se()},ee=Q({Laccount:d().required("請輸入帳號").min(4,"帳號長度不符").max(20,"帳號長度不符").test("isAlphanumeric","帳號只能輸入英數字",o=>C.isAlphanumeric(o)),Lpassword:d().required("請輸入密碼")}),le=Q({Raccount:d().required("請輸入帳號").min(4,"帳號至少需輸入8個字").max(20,"帳號長度不得超過20個字").test("isAlphanumeric","帳號只能輸入英數字",o=>C.isAlphanumeric(o)),Rpassword:d().required("請輸入密碼").min(8,"密碼至少需輸入8個字"),passwordConfirm:d().required("請再次輸入密碼").oneOf([be("Rpassword")],"密碼不一致"),name:d().required("請輸入姓名"),email:d().required("請輸入信箱").test("isEmail","請輸入正確的信箱格式",o=>C.isEmail(o)),phone:d().required("請輸入手機號碼").min(10,"請輸入10碼手機號碼").test("isMobilePhone","請輸入正確的手機號碼格式",o=>C.isMobilePhone(o)),birthday:d().required("請輸入生日").test("isDate","請輸入正確的日期格式",o=>C.isDate(o))}),{handleSubmit:ae,isSubmitting:L,resetForm:se}=W({validationSchema:le}),V=m("Raccount"),x=m("Rpassword"),h=m("passwordConfirm"),w=m("name"),S=m("email"),k=m("phone"),M=m("birthday"),{handleSubmit:te,isSubmitting:P,resetForm:oe}=W({validationSchema:ee}),b=m("Laccount"),R=m("Lpassword"),J=ae(async o=>{var s,G;const a=()=>{setTimeout(()=>{window.location.reload()},1500)};try{await Z.post("/user",{account:o.Raccount,password:o.Rpassword,name:o.name,email:o.email,phone:o.phone,birthday:o.birthday}),I({text:"註冊成功",snackbarProps:{color:"teal-darken-1"}}),a()}catch(F){console.log(F),I({text:((G=(s=F==null?void 0:F.response)==null?void 0:s.data)==null?void 0:G.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}}),O=te(async o=>{const a=await X.login(o);a==="登入成功"?(y.value?(localStorage.setItem("rememberMe",!0),localStorage.setItem("account",o.Laccount)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("account")),I({text:a,snackbarProps:{color:"teal-darken-1"}}),X.isAdmin?D.push("/admin/product"):D.push("/")):I({text:a,snackbarProps:{color:"red-lighten-1"}})});return me(()=>{localStorage.getItem("rememberMe")&&(y.value=!0,b.value.value=localStorage.getItem("account"))}),(o,a)=>(N(),pe("div",ye,[e(q)?(N(),H(u,{key:0,id:"login-register",class:"d-flex justify-center align-center"},{default:t(()=>[l(u,{class:"login wrapper d-flex align-center justify-center ps-8 pe-8",style:{height:"400px","margin-right":"20px"}},{default:t(()=>[l(i,null,{default:t(()=>[l(n,{cols:"12"},{default:t(()=>[Ve]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(A,{disabled:e(P),onSubmit:$(e(O),["prevent"])},{default:t(()=>[l(r,{modelValue:e(b).value.value,"onUpdate:modelValue":a[0]||(a[0]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(R).value.value,"onUpdate:modelValue":a[1]||(a[1]=s=>e(R).value.value=s),"error-messages":e(R).errorMessage.value,class:"mt-4",label:"密碼",type:c.value?"text":"password","append-inner-icon":c.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[2]||(a[2]=s=>c.value=!c.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(i,null,{default:t(()=>[l(n,{class:"remember-me ps-2"},{default:t(()=>[l(Y,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=s=>y.value=s),label:"記住我","hide-details":"",color:"#546e7a",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(j,{class:"mt-4",type:"submit",block:"",loading:e(P)},{default:t(()=>[f(" 登入 ")]),_:1},8,["loading"]),l(u,{class:"signup mt-4"},{default:t(()=>[l(i,{class:"d-flex justify-end"},{default:t(()=>[l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 還沒有VPT帳號? ")]),_:1}),l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showRegister",class:"ms-3 link",onClick:E}," 立即加入會員 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}),l(u,{class:"register wrapper ps-8 pe-8 pt-8",style:{height:"750px"}},{default:t(()=>[l(i,null,{default:t(()=>[l(n,{cols:"12"},{default:t(()=>[xe]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(A,{disabled:e(L),onSubmit:$(e(J),["prevent"])},{default:t(()=>[l(r,{modelValue:e(V).value.value,"onUpdate:modelValue":a[4]||(a[4]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(w).value.value,"onUpdate:modelValue":a[5]||(a[5]=s=>e(w).value.value=s),"error-messages":e(w).errorMessage.value,class:"mt-2",label:"姓名",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(S).value.value,"onUpdate:modelValue":a[6]||(a[6]=s=>e(S).value.value=s),"error-messages":e(S).errorMessage.value,class:"mt-2",label:"email",type:"email",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(k).value.value,"onUpdate:modelValue":a[7]||(a[7]=s=>e(k).value.value=s),"error-messages":e(k).errorMessage.value,class:"mt-2",label:"手機號碼",type:"text",variant:"outlined",density:"compact","min-length":"10",maxlength:"10",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(M).value.value,"onUpdate:modelValue":a[8]||(a[8]=s=>e(M).value.value=s),"error-messages":e(M).errorMessage.value,class:"mt-2",label:"生日",type:"date",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(x).value.value,"onUpdate:modelValue":a[9]||(a[9]=s=>e(x).value.value=s),"error-messages":e(x).errorMessage.value,class:"mt-2",label:"密碼",type:g.value?"text":"password","append-inner-icon":g.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[10]||(a[10]=s=>g.value=!g.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(r,{modelValue:e(h).value.value,"onUpdate:modelValue":a[11]||(a[11]=s=>e(h).value.value=s),"error-messages":e(h).errorMessage.value,class:"mt-2",label:"確認密碼",type:v.value?"text":"password","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[12]||(a[12]=s=>v.value=!v.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(j,{class:"mt-4",type:"submit",block:"",loading:e(L)},{default:t(()=>[f(" 註冊 ")]),_:1},8,["loading"]),l(u,{class:"signup mt-4 mb-4"},{default:t(()=>[l(i,{class:"d-flex justify-end"},{default:t(()=>[l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 已經有VPT帳號? ")]),_:1}),l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showLogin",class:"ms-3 link",onClick:z}," 登入 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})):K("",!0),e(q)?K("",!0):(N(),H(u,{key:1,fluid:"",class:ce(["bg-loginBg h-100 sm-container",{"show-register":!B.value}])},{default:t(()=>[p("div",he,[l(u,{class:"login wrapper d-flex align-center justify-center ps-8 pe-8"},{default:t(()=>[l(i,null,{default:t(()=>[l(n,{cols:"12"},{default:t(()=>[we]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(A,{disabled:e(P),onSubmit:$(e(O),["prevent"])},{default:t(()=>[l(r,{modelValue:e(b).value.value,"onUpdate:modelValue":a[13]||(a[13]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(R).value.value,"onUpdate:modelValue":a[14]||(a[14]=s=>e(R).value.value=s),"error-messages":e(R).errorMessage.value,class:"mt-4",label:"密碼",type:c.value?"text":"password","append-inner-icon":c.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[15]||(a[15]=s=>c.value=!c.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(i,null,{default:t(()=>[l(n,{class:"remember-me ps-2"},{default:t(()=>[l(Y,{modelValue:y.value,"onUpdate:modelValue":a[16]||(a[16]=s=>y.value=s),label:"記住我","hide-details":"",color:"#546e7a",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),l(j,{class:"mt-4",type:"submit",block:"",loading:e(P)},{default:t(()=>[f(" 登入 ")]),_:1},8,["loading"]),l(u,{class:"signup mt-4"},{default:t(()=>[l(i,{class:"d-flex justify-end"},{default:t(()=>[l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 還沒有VPT帳號? ")]),_:1}),l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showRegister",class:"ms-3 link",onClick:E}," 立即加入會員 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}),l(u,{class:"register wrapper ps-8 pe-8 pt-8"},{default:t(()=>[l(i,null,{default:t(()=>[l(n,{cols:"12"},{default:t(()=>[Se]),_:1}),l(n,{cols:"12"},{default:t(()=>[l(A,{disabled:e(L),onSubmit:$(e(J),["prevent"])},{default:t(()=>[l(r,{modelValue:e(V).value.value,"onUpdate:modelValue":a[17]||(a[17]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(w).value.value,"onUpdate:modelValue":a[18]||(a[18]=s=>e(w).value.value=s),"error-messages":e(w).errorMessage.value,class:"mt-2",label:"姓名",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(S).value.value,"onUpdate:modelValue":a[19]||(a[19]=s=>e(S).value.value=s),"error-messages":e(S).errorMessage.value,class:"mt-2",label:"email",type:"email",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(k).value.value,"onUpdate:modelValue":a[20]||(a[20]=s=>e(k).value.value=s),"error-messages":e(k).errorMessage.value,class:"mt-2",label:"手機號碼",type:"text",variant:"outlined",density:"compact","min-length":"10",maxlength:"10",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(M).value.value,"onUpdate:modelValue":a[21]||(a[21]=s=>e(M).value.value=s),"error-messages":e(M).errorMessage.value,class:"mt-2",label:"生日",type:"date",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),l(r,{modelValue:e(x).value.value,"onUpdate:modelValue":a[22]||(a[22]=s=>e(x).value.value=s),"error-messages":e(x).errorMessage.value,class:"mt-2",label:"密碼",type:g.value?"text":"password","append-inner-icon":g.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[23]||(a[23]=s=>g.value=!g.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(r,{modelValue:e(h).value.value,"onUpdate:modelValue":a[24]||(a[24]=s=>e(h).value.value=s),"error-messages":e(h).errorMessage.value,class:"mt-2",label:"確認密碼",type:v.value?"text":"password","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":a[25]||(a[25]=s=>v.value=!v.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),l(j,{class:"mt-4",type:"submit",block:"",loading:e(L)},{default:t(()=>[f(" 註冊 ")]),_:1},8,["loading"]),l(u,{class:"signup mt-4 mb-4"},{default:t(()=>[l(i,{class:"d-flex justify-end"},{default:t(()=>[l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 已經有VPT帳號? ")]),_:1}),l(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showLogin",class:"ms-3 link",onClick:z}," 登入 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["class"]))]))}},Fe=re(ke,[["__scopeId","data-v-6a229189"]]);export{Fe as default};
