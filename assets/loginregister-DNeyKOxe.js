import{_ as ne,k as ue,bg as ie,u as de,i as me,r as C,l as pe,b as ce,e,n as K,w as t,z as Q,ax as ge,C as ve,o as X,d as a,aL as $,aJ as r,I as A,g as f,j as p,p as fe,h as be}from"./index-D9y08I5N.js";import{v as I}from"./index-DcBOdE6S.js";import{c as W,a as u,g as ye,u as Y,b as i}from"./vee-validate.esm-DBsUersC.js";import{V as d}from"./VContainer-ls7suWua.js";import{V as m,a as n}from"./VRow-BqsXEnzv.js";import{V as T}from"./VForm-C6CKmaTy.js";import{V as Z}from"./VCheckbox-DmDv4Tqc.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCheckboxBtn-CJPKLAHk.js";const B=L=>(fe("data-v-60c67207"),L=L(),be(),L),Ve={id:"background",class:"d-flex justify-center align-center"},xe=B(()=>p("div",{class:"title text-center"}," 登入 ",-1)),he=B(()=>p("div",{class:"title text-center"}," 立即註冊 ",-1)),we={class:"sm-wrapper"},Se=B(()=>p("div",{class:"title text-center"}," 登入 ",-1)),ke=B(()=>p("div",{class:"title text-center"}," 立即註冊 ",-1)),Me={__name:"loginregister",setup(L){const{smAndUp:_}=ue(),{api:ee}=ve(),D=ie(),E=de(),q=me(),N=C(!0),c=C(!1),g=C(!1),v=C(!1),y=C(!1),z=()=>{if(_.value){const o=document.querySelector(".login"),l=document.querySelector(".register"),s=document.querySelector("#login-register");s.style.height="800px",o.style.transform="translateX(-420px)",l.style.transform="translateX(-420px)"}else N.value=!1;re()},J=()=>{if(_.value){const o=document.querySelector(".login"),l=document.querySelector(".register"),s=document.querySelector("#login-register");s.style.height="440px",o.style.transform="translateX(0)",l.style.transform="translateX(0)"}else N.value=!0;te()},le=W({Laccount:u().required("請輸入帳號").min(4,"帳號長度不符").max(20,"帳號長度不符").test("isAlphanumeric","帳號只能輸入英數字",o=>I.isAlphanumeric(o)),Lpassword:u().required("請輸入密碼")}),ae=W({Raccount:u().required("請輸入帳號").min(4,"帳號至少需輸入8個字").max(20,"帳號長度不得超過20個字").test("isAlphanumeric","帳號只能輸入英數字",o=>I.isAlphanumeric(o)),Rpassword:u().required("請輸入密碼").min(8,"密碼至少需輸入8個字"),passwordConfirm:u().required("請再次輸入密碼").oneOf([ye("Rpassword")],"密碼不一致"),name:u().required("請輸入姓名"),nickname:u(),email:u().required("請輸入信箱").test("isEmail","請輸入正確的信箱格式",o=>I.isEmail(o)),phone:u().required("請輸入手機號碼").min(10,"請輸入10碼手機號碼").test("isMobilePhone","請輸入正確的手機號碼格式",o=>I.isMobilePhone(o)),birthday:u().required("請輸入生日").test("isDate","請輸入正確的日期格式",o=>I.isDate(o))}),{handleSubmit:se,isSubmitting:P,resetForm:te}=Y({validationSchema:ae}),V=i("Raccount"),x=i("Rpassword"),h=i("passwordConfirm"),w=i("name"),S=i("nickname"),k=i("email"),M=i("phone"),U=i("birthday"),{handleSubmit:oe,isSubmitting:j,resetForm:re}=Y({validationSchema:le}),b=i("Laccount"),R=i("Lpassword"),O=se(async o=>{var s,H;const l=()=>{setTimeout(()=>{window.location.reload()},1500)};try{await ee.post("/user",{account:o.Raccount,password:o.Rpassword,name:o.name,nickname:o.nickname,email:o.email,phone:o.phone,birthday:o.birthday}),q({text:"註冊成功",snackbarProps:{color:"teal-darken-1"}}),l()}catch(F){console.log(F),q({text:((H=(s=F==null?void 0:F.response)==null?void 0:s.data)==null?void 0:H.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}}),G=oe(async o=>{const l=await E.login(o);l==="登入成功"?(y.value?(localStorage.setItem("rememberMe",!0),localStorage.setItem("account",o.Laccount)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("account")),q({text:l,snackbarProps:{color:"teal-darken-1"}}),E.isAdmin?D.push("/admin/product"):D.push("/")):q({text:l,snackbarProps:{color:"red-lighten-1"}})});return pe(()=>{localStorage.getItem("rememberMe")&&(y.value=!0,b.value.value=localStorage.getItem("account"))}),(o,l)=>(X(),ce("div",Ve,[e(_)?(X(),K(d,{key:0,id:"login-register",class:"d-flex justify-center align-center"},{default:t(()=>[a(d,{class:"login wrapper d-flex align-center justify-center ps-8 pe-8",style:{height:"400px","margin-right":"20px"}},{default:t(()=>[a(m,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[xe]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(T,{disabled:e(j),onSubmit:$(e(G),["prevent"])},{default:t(()=>[a(r,{modelValue:e(b).value.value,"onUpdate:modelValue":l[0]||(l[0]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(R).value.value,"onUpdate:modelValue":l[1]||(l[1]=s=>e(R).value.value=s),"error-messages":e(R).errorMessage.value,class:"mt-4",label:"密碼",type:c.value?"text":"password","append-inner-icon":c.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[2]||(l[2]=s=>c.value=!c.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(m,null,{default:t(()=>[a(n,{class:"remember-me ps-2"},{default:t(()=>[a(Z,{modelValue:y.value,"onUpdate:modelValue":l[3]||(l[3]=s=>y.value=s),label:"記住我","hide-details":"",color:"#546e7a",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,{class:"mt-4",type:"submit",block:"",loading:e(j)},{default:t(()=>[f(" 登入 ")]),_:1},8,["loading"]),a(d,{class:"signup mt-4"},{default:t(()=>[a(m,{class:"d-flex justify-end"},{default:t(()=>[a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 還沒有VPT帳號? ")]),_:1}),a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showRegister",class:"ms-3 link",onClick:z}," 立即加入會員 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}),a(d,{class:"register wrapper ps-8 pe-8 pt-8",style:{height:"750px"}},{default:t(()=>[a(m,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[he]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(T,{disabled:e(P),onSubmit:$(e(O),["prevent"])},{default:t(()=>[a(r,{modelValue:e(V).value.value,"onUpdate:modelValue":l[4]||(l[4]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(w).value.value,"onUpdate:modelValue":l[5]||(l[5]=s=>e(w).value.value=s),"error-messages":e(w).errorMessage.value,class:"mt-2",label:"姓名",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(S).value.value,"onUpdate:modelValue":l[6]||(l[6]=s=>e(S).value.value=s),"error-messages":e(S).errorMessage.value,class:"mt-2",label:"暱稱",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(k).value.value,"onUpdate:modelValue":l[7]||(l[7]=s=>e(k).value.value=s),"error-messages":e(k).errorMessage.value,class:"mt-2",label:"email",type:"email",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(M).value.value,"onUpdate:modelValue":l[8]||(l[8]=s=>e(M).value.value=s),"error-messages":e(M).errorMessage.value,class:"mt-2",label:"手機號碼",type:"text",variant:"outlined",density:"compact","min-length":"10",maxlength:"10",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(U).value.value,"onUpdate:modelValue":l[9]||(l[9]=s=>e(U).value.value=s),"error-messages":e(U).errorMessage.value,class:"mt-2",label:"生日",type:"date",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(x).value.value,"onUpdate:modelValue":l[10]||(l[10]=s=>e(x).value.value=s),"error-messages":e(x).errorMessage.value,class:"mt-2",label:"密碼",type:g.value?"text":"password","append-inner-icon":g.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[11]||(l[11]=s=>g.value=!g.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(r,{modelValue:e(h).value.value,"onUpdate:modelValue":l[12]||(l[12]=s=>e(h).value.value=s),"error-messages":e(h).errorMessage.value,class:"mt-2",label:"確認密碼",type:v.value?"text":"password","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[13]||(l[13]=s=>v.value=!v.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(A,{class:"mt-4",type:"submit",block:"",loading:e(P)},{default:t(()=>[f(" 註冊 ")]),_:1},8,["loading"]),a(d,{class:"signup mt-4 mb-4"},{default:t(()=>[a(m,{class:"d-flex justify-end"},{default:t(()=>[a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 已經有VPT帳號? ")]),_:1}),a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showLogin",class:"ms-3 link",onClick:J}," 登入 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})):Q("",!0),e(_)?Q("",!0):(X(),K(d,{key:1,fluid:"",class:ge(["bg-loginBg h-100 sm-container",{"show-register":!N.value}])},{default:t(()=>[p("div",we,[a(d,{class:"login wrapper d-flex align-center justify-center ps-8 pe-8"},{default:t(()=>[a(m,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[Se]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(T,{disabled:e(j),onSubmit:$(e(G),["prevent"])},{default:t(()=>[a(r,{modelValue:e(b).value.value,"onUpdate:modelValue":l[14]||(l[14]=s=>e(b).value.value=s),"error-messages":e(b).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(R).value.value,"onUpdate:modelValue":l[15]||(l[15]=s=>e(R).value.value=s),"error-messages":e(R).errorMessage.value,class:"mt-4",label:"密碼",type:c.value?"text":"password","append-inner-icon":c.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[16]||(l[16]=s=>c.value=!c.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(m,null,{default:t(()=>[a(n,{class:"remember-me ps-2"},{default:t(()=>[a(Z,{modelValue:y.value,"onUpdate:modelValue":l[17]||(l[17]=s=>y.value=s),label:"記住我","hide-details":"",color:"#546e7a",density:"compact"},null,8,["modelValue"])]),_:1})]),_:1}),a(A,{class:"mt-4",type:"submit",block:"",loading:e(j)},{default:t(()=>[f(" 登入 ")]),_:1},8,["loading"]),a(d,{class:"signup mt-4"},{default:t(()=>[a(m,{class:"d-flex justify-end"},{default:t(()=>[a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 還沒有VPT帳號? ")]),_:1}),a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showRegister",class:"ms-3 link",onClick:z}," 立即加入會員 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1}),a(d,{class:"register wrapper ps-8 pe-8 pt-8"},{default:t(()=>[a(m,null,{default:t(()=>[a(n,{cols:"12"},{default:t(()=>[ke]),_:1}),a(n,{cols:"12"},{default:t(()=>[a(T,{disabled:e(P),onSubmit:$(e(O),["prevent"])},{default:t(()=>[a(r,{modelValue:e(V).value.value,"onUpdate:modelValue":l[18]||(l[18]=s=>e(V).value.value=s),"error-messages":e(V).errorMessage.value,label:"帳號",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(w).value.value,"onUpdate:modelValue":l[19]||(l[19]=s=>e(w).value.value=s),"error-messages":e(w).errorMessage.value,class:"mt-2",label:"姓名",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(S).value.value,"onUpdate:modelValue":l[20]||(l[20]=s=>e(S).value.value=s),"error-messages":e(S).errorMessage.value,class:"mt-2",label:"暱稱",type:"text",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(k).value.value,"onUpdate:modelValue":l[21]||(l[21]=s=>e(k).value.value=s),"error-messages":e(k).errorMessage.value,class:"mt-2",label:"email",type:"email",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(M).value.value,"onUpdate:modelValue":l[22]||(l[22]=s=>e(M).value.value=s),"error-messages":e(M).errorMessage.value,class:"mt-2",label:"手機號碼",type:"text",variant:"outlined",density:"compact","min-length":"10",maxlength:"10",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(U).value.value,"onUpdate:modelValue":l[23]||(l[23]=s=>e(U).value.value=s),"error-messages":e(U).errorMessage.value,class:"mt-2",label:"生日",type:"date",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"]),a(r,{modelValue:e(x).value.value,"onUpdate:modelValue":l[24]||(l[24]=s=>e(x).value.value=s),"error-messages":e(x).errorMessage.value,class:"mt-2",label:"密碼",type:g.value?"text":"password","append-inner-icon":g.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[25]||(l[25]=s=>g.value=!g.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(r,{modelValue:e(h).value.value,"onUpdate:modelValue":l[26]||(l[26]=s=>e(h).value.value=s),"error-messages":e(h).errorMessage.value,class:"mt-2",label:"確認密碼",type:v.value?"text":"password","append-inner-icon":v.value?"mdi-eye-off":"mdi-eye",variant:"outlined",density:"compact","min-length":"4",maxlength:"20",clearable:"","onClick:appendInner":l[27]||(l[27]=s=>v.value=!v.value)},null,8,["modelValue","error-messages","type","append-inner-icon"]),a(A,{class:"mt-4",type:"submit",block:"",loading:e(P)},{default:t(()=>[f(" 註冊 ")]),_:1},8,["loading"]),a(d,{class:"signup mt-4 mb-4"},{default:t(()=>[a(m,{class:"d-flex justify-end"},{default:t(()=>[a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[f(" 已經有VPT帳號? ")]),_:1}),a(n,{cols:"auto",class:"pa-0"},{default:t(()=>[p("div",{id:"showLogin",class:"ms-3 link",onClick:J}," 登入 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["class"]))]))}},Fe=ne(Me,[["__scopeId","data-v-60c67207"]]);export{Fe as default};
