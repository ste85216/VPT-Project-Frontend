import{bJ as oe,D as z,K as le,N as ge,O as se,G as H,a4 as ie,aj as be,T as N,bK as ye,r as I,c as C,a7 as F,ad as R,aH as _e,d as l,I as L,H as X,$ as ue,bx as ke,J as Ve,al as xe,l as re,F as T,ar as Ce,m as A,bL as we,ac as G,bM as Se,bN as Ie,b4 as Be,bO as Pe,am as Te,bP as pe,a0 as $e,Z as Le,ap as Ee,bQ as De,s as j,bm as Re,a2 as Ae,Q as ze,R as He,bq as Xe,a6 as Ye,a$ as We,_ as je,au as Me,i as Oe,u as Fe,a as Ge,b as $,w as c,bD as Ne,o as x,n as E,f as W,j as p,t as D,bj as Ue,g as P,V as q,aN as qe,C as Qe,bR as Je,ay as Ke,p as Ze,h as et}from"./index-evL9p-l4.js";import{_ as tt}from"./CartIcon-fs9CVDj0.js";import{b as Q}from"./route-block-B_A1xBdJ.js";import{V as at}from"./VContainer-YFgYtfuI.js";import{V as J,a as B}from"./VRow-B-tIestn.js";import{a as K,V as Z}from"./VChip-C3RR8zer.js";const nt=e=>{const{touchstartX:a,touchendX:t,touchstartY:o,touchendY:s}=e,u=.5,n=16;e.offsetX=t-a,e.offsetY=s-o,Math.abs(e.offsetY)<u*Math.abs(e.offsetX)&&(e.left&&t<a-n&&e.left(e),e.right&&t>a+n&&e.right(e)),Math.abs(e.offsetX)<u*Math.abs(e.offsetY)&&(e.up&&s<o-n&&e.up(e),e.down&&s>o+n&&e.down(e))};function ot(e,a){var o;const t=e.changedTouches[0];a.touchstartX=t.clientX,a.touchstartY=t.clientY,(o=a.start)==null||o.call(a,{originalEvent:e,...a})}function lt(e,a){var o;const t=e.changedTouches[0];a.touchendX=t.clientX,a.touchendY=t.clientY,(o=a.end)==null||o.call(a,{originalEvent:e,...a}),nt(a)}function st(e,a){var o;const t=e.changedTouches[0];a.touchmoveX=t.clientX,a.touchmoveY=t.clientY,(o=a.move)==null||o.call(a,{originalEvent:e,...a})}function it(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:t=>ot(t,a),touchend:t=>lt(t,a),touchmove:t=>st(t,a)}}function ut(e,a){var v;const t=a.value,o=t!=null&&t.parent?e.parentElement:e,s=(t==null?void 0:t.options)??{passive:!0},u=(v=a.instance)==null?void 0:v.$.uid;if(!o||!u)return;const n=it(a.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[u]=n,oe(n).forEach(d=>{o.addEventListener(d,n[d],s)})}function rt(e,a){var u,n;const t=(u=a.value)!=null&&u.parent?e.parentElement:e,o=(n=a.instance)==null?void 0:n.$.uid;if(!(t!=null&&t._touchHandlers)||!o)return;const s=t._touchHandlers[o];oe(s).forEach(v=>{t.removeEventListener(v,s[v])}),delete t._touchHandlers[o]}const ce={mounted:ut,unmounted:rt},de=Symbol.for("vuetify:v-window"),ve=Symbol.for("vuetify:v-window-group"),me=z({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||e==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...le(),...ge(),...se()},"VWindow"),ee=H()({name:"VWindow",directives:{Touch:ce},props:me(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const{themeClasses:o}=ie(e),{isRtl:s}=be(),{t:u}=N(),n=ye(e,ve),v=I(),d=C(()=>s.value?!e.reverse:e.reverse),m=F(!1),g=C(()=>{const r=e.direction==="vertical"?"y":"x",S=(d.value?!m.value:m.value)?"-reverse":"";return`v-window-${r}${S}-transition`}),b=F(0),y=I(void 0),w=C(()=>n.items.value.findIndex(r=>n.selected.value.includes(r.id)));R(w,(r,_)=>{const S=n.items.value.length,U=S-1;S<=2?m.value=r<_:r===U&&_===0?m.value=!0:r===0&&_===U?m.value=!1:m.value=r<_}),_e(de,{transition:g,isReversed:m,transitionCount:b,transitionHeight:y,rootRef:v});const f=C(()=>e.continuous||w.value!==0),Y=C(()=>e.continuous||w.value!==n.items.value.length-1);function V(){f.value&&n.prev()}function h(){Y.value&&n.next()}const k=C(()=>{const r=[],_={icon:s.value?e.nextIcon:e.prevIcon,class:`v-window__${d.value?"right":"left"}`,onClick:n.prev,"aria-label":u("$vuetify.carousel.prev")};r.push(f.value?t.prev?t.prev({props:_}):l(L,_,null):l("div",null,null));const S={icon:s.value?e.prevIcon:e.nextIcon,class:`v-window__${d.value?"left":"right"}`,onClick:n.next,"aria-label":u("$vuetify.carousel.next")};return r.push(Y.value?t.next?t.next({props:S}):l(L,S,null):l("div",null,null)),r}),i=C(()=>e.touch===!1?e.touch:{...{left:()=>{d.value?V():h()},right:()=>{d.value?h():V()},start:_=>{let{originalEvent:S}=_;S.stopPropagation()}},...e.touch===!0?{}:e.touch});return X(()=>ue(l(e.tag,{ref:v,class:["v-window",{"v-window--show-arrows-on-hover":e.showArrows==="hover"},o.value,e.class],style:e.style},{default:()=>{var r,_;return[l("div",{class:"v-window__container",style:{height:y.value}},[(r=t.default)==null?void 0:r.call(t,{group:n}),e.showArrows!==!1&&l("div",{class:"v-window__controls"},[k.value])]),(_=t.additional)==null?void 0:_.call(t,{group:n})]}}),[[ke("touch"),i.value]])),{group:n}}}),ct=z({color:String,cycle:Boolean,delimiterIcon:{type:Ve,default:"$delimiter"},height:{type:[Number,String],default:500},hideDelimiters:Boolean,hideDelimiterBackground:Boolean,interval:{type:[Number,String],default:6e3,validator:e=>Number(e)>0},progress:[Boolean,String],verticalDelimiters:[Boolean,String],...me({continuous:!0,mandatory:"force",showArrows:!0})},"VCarousel"),dt=H()({name:"VCarousel",props:ct(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:t}=a;const o=xe(e,"modelValue"),{t:s}=N(),u=I();let n=-1;R(o,d),R(()=>e.interval,d),R(()=>e.cycle,m=>{m?d():window.clearTimeout(n)}),re(v);function v(){!e.cycle||!u.value||(n=window.setTimeout(u.value.group.next,+e.interval>0?+e.interval:6e3))}function d(){window.clearTimeout(n),window.requestAnimationFrame(v)}return X(()=>{const m=ee.filterProps(e);return l(ee,A({ref:u},m,{modelValue:o.value,"onUpdate:modelValue":g=>o.value=g,class:["v-carousel",{"v-carousel--hide-delimiter-background":e.hideDelimiterBackground,"v-carousel--vertical-delimiters":e.verticalDelimiters},e.class],style:[{height:G(e.height)},e.style]}),{default:t.default,additional:g=>{let{group:b}=g;return l(T,null,[!e.hideDelimiters&&l("div",{class:"v-carousel__controls",style:{left:e.verticalDelimiters==="left"&&e.verticalDelimiters?0:"auto",right:e.verticalDelimiters==="right"?0:"auto"}},[b.items.value.length>0&&l(Ce,{defaults:{VBtn:{color:e.color,icon:e.delimiterIcon,size:"x-small",variant:"text"}},scoped:!0},{default:()=>[b.items.value.map((y,w)=>{const f={id:`carousel-item-${y.id}`,"aria-label":s("$vuetify.carousel.ariaLabel.delimiter",w+1,b.items.value.length),class:["v-carousel__controls__item",b.isSelected(y.id)&&"v-btn--active"],onClick:()=>b.select(y.id,!0)};return t.item?t.item({props:f,item:y}):l(L,A(y,f),null)})]})]),e.progress&&l(we,{class:"v-carousel__progress",color:typeof e.progress=="string"?e.progress:void 0,modelValue:(b.getItemIndex(o.value)+1)/b.items.value.length*100},null)])},prev:t.prev,next:t.next})}),{}}}),fe=z({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...le(),...Se(),...Ie()},"VWindowItem"),te=H()({name:"VWindowItem",directives:{Touch:ce},props:fe(),emits:{"group:selected":e=>!0},setup(e,a){let{slots:t}=a;const o=Be(de),s=Pe(e,ve),{isBooted:u}=Te();if(!o||!s)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const n=F(!1),v=C(()=>u.value&&(o.isReversed.value?e.reverseTransition!==!1:e.transition!==!1));function d(){!n.value||!o||(n.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function m(){var f;n.value||!o||(n.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=G((f=o.rootRef.value)==null?void 0:f.clientHeight)),o.transitionCount.value+=1)}function g(){d()}function b(f){n.value&&Ee(()=>{!v.value||!n.value||!o||(o.transitionHeight.value=G(f.clientHeight))})}const y=C(()=>{const f=o.isReversed.value?e.reverseTransition:e.transition;return v.value?{name:typeof f!="string"?o.transition.value:f,onBeforeEnter:m,onAfterEnter:d,onEnterCancelled:g,onBeforeLeave:m,onAfterLeave:d,onLeaveCancelled:g,onEnter:b}:!1}),{hasContent:w}=pe(e,s.isSelected);return X(()=>l(Le,{transition:y.value,disabled:!u.value},{default:()=>{var f;return[ue(l("div",{class:["v-window-item",s.selectedClass.value,e.class],style:e.style},[w.value&&((f=t.default)==null?void 0:f.call(t))]),[[$e,s.isSelected.value]])]}})),{groupItem:s}}}),vt=z({...De(),...fe()},"VCarouselItem"),mt=H()({name:"VCarouselItem",inheritAttrs:!1,props:vt(),setup(e,a){let{slots:t,attrs:o}=a;X(()=>{const s=j.filterProps(e),u=te.filterProps(e);return l(te,A({class:["v-carousel-item",e.class]},u),{default:()=>[l(j,A(o,s),t)]})})}}),ft={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function ht(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return l("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${e}`]},[a])}function ae(e){const[a,t]=e.split("@");return Array.from({length:t}).map(()=>M(a))}function M(e){let a=[];if(!e)return a;const t=ft[e];if(e!==t){if(e.includes(","))return ne(e);if(e.includes("@"))return ae(e);t.includes(",")?a=ne(t):t.includes("@")?a=ae(t):t&&a.push(M(t))}return[ht(e,a)]}function ne(e){return e.replace(/\s/g,"").split(",").map(M)}const gt=z({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...Re(),...Ae(),...se()},"VSkeletonLoader"),bt=H()({name:"VSkeletonLoader",props:gt(),setup(e,a){let{slots:t}=a;const{backgroundColorClasses:o,backgroundColorStyles:s}=ze(He(e,"color")),{dimensionStyles:u}=Xe(e),{elevationClasses:n}=Ye(e),{themeClasses:v}=ie(e),{t:d}=N(),m=C(()=>M(We(e.type).join(",")));return X(()=>{var y;const g=!t.default||e.loading,b=e.boilerplate||!g?{}:{ariaLive:"polite",ariaLabel:d(e.loadingText),role:"alert"};return l("div",A({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":e.boilerplate},v.value,o.value,n.value],style:[s.value,g?u.value:{}]},b),[g?m.value:(y=t.default)==null?void 0:y.call(t)])}),{}}}),O=e=>(Ze("data-v-4b326237"),e=e(),et(),e),yt=O(()=>p("h3",null,"尺寸",-1)),_t=O(()=>p("h3",null,"顏色",-1)),kt=O(()=>p("h3",null,"數量",-1)),Vt={class:"px-5"},xt={class:"d-flex align-center pe-1"},Ct=O(()=>p("h1",{class:"no-sell-title"}," 此商品已下架 ",-1)),he={__name:"[id]",emits:["update:category"],setup(e,{emit:a}){const{apiAuth:t}=Qe(),o=Me(),s=Oe(),u=Fe(),n=I({_id:"",name:"",price:0,images:[],sell:!0,description:"",category:"",colors:[],sizes:[]}),v=I(0),d=I(""),m=I(""),g=I(1),b=I(!0),y=async()=>{var V,h;try{const{data:k}=await t.get(`/product/${o.params.id}`);n.value=k.result,typeof n.value.colors=="string"&&(n.value.colors=n.value.colors.split(",")),typeof n.value.sizes=="string"&&(n.value.sizes=n.value.sizes.split(",")),document.title=`${n.value.name} | VPT`,w("update:category",n.value.category),b.value=!1}catch(k){console.log(k),s({text:((h=(V=k==null?void 0:k.response)==null?void 0:V.data)==null?void 0:h.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}}),b.value=!1}};re(()=>{y()});const w=a,f=V=>{g.value=Math.max(1,g.value+V)},Y=async()=>{var h,k;if(!u.isLogin){s({text:"請先登入",snackbarProps:{color:"red-lighten-1"}}),Je.push("/loginregister");return}if(!d.value||!m.value){s({text:"請選擇尺寸和顏色",snackbarProps:{color:"red-lighten-1"}});return}const V={p_id:n.value._id,colors:m.value,sizes:d.value,quantity:g.value};try{const{data:i}=await t.patch("/user/cart",V);s({text:"商品已加入購物車",snackbarProps:{color:"teal-darken-1"}}),i.result&&Array.isArray(i.result.cart)?u.cart=[...i.result.cart]:console.error("購物車數據結構錯誤",i.result.cart)}catch(i){console.log(i),s({text:((k=(h=i==null?void 0:i.response)==null?void 0:h.data)==null?void 0:k.message)||"發生錯誤",snackbarProps:{color:"red-lighten-1"}})}};return R(()=>u.cart,V=>{u.cart=V}),(V,h)=>{const k=Ge("router-link");return x(),$(T,null,[l(at,null,{default:c(()=>[l(J,null,{default:c(()=>[l(B,{class:"pa-0 pt-5 pb-4",cols:"12",sm:"6"},{default:c(()=>[b.value?(x(),E(bt,{key:0,class:"rounded-xl elevation-6 skeleton-full-height",type:"image"})):(x(),$(T,{key:1},[l(dt,{modelValue:v.value,"onUpdate:modelValue":h[0]||(h[0]=i=>v.value=i),"hide-delimiters":"","show-arrows":!1,height:"480",class:"rounded-xl elevation-6"},{default:c(()=>[(x(!0),$(T,null,W(n.value.images,(i,r)=>(x(),E(mt,{key:r},{default:c(()=>[l(j,{src:i,cover:"",height:"480",class:"product-img"},null,8,["src"])]),_:2},1024))),128))]),_:1},8,["modelValue"]),l(J,{class:"mt-4"},{default:c(()=>[(x(!0),$(T,null,W(n.value.images,(i,r)=>(x(),E(B,{key:r,cols:"3"},{default:c(()=>[l(j,{src:i,cover:"",height:"80",class:Ke(["thumbnail",{"thumbnail-active":v.value===r}]),onClick:_=>v.value=r},null,8,["src","class","onClick"])]),_:2},1024))),128))]),_:1})],64))]),_:1}),l(B,{cols:"12",sm:"6",class:"ps-0 ps-sm-10 d-flex flex-column"},{default:c(()=>[l(B,null,{default:c(()=>[p("h2",null,D(n.value.name),1),l(Ue,{class:"custom-subtitle mt-2"},{default:c(()=>[P(D(n.value.description),1)]),_:1})]),_:1}),l(B,null,{default:c(()=>[yt,l(K,{modelValue:d.value,"onUpdate:modelValue":h[1]||(h[1]=i=>d.value=i),class:"pa-0",column:"",filter:""},{default:c(()=>[(x(!0),$(T,null,W(n.value.sizes,(i,r)=>(x(),E(Z,{key:r,value:i,size:"large",color:"teal-lighten-1"},{default:c(()=>[P(D(i),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(B,null,{default:c(()=>[_t,l(K,{modelValue:m.value,"onUpdate:modelValue":h[2]||(h[2]=i=>m.value=i),class:"pa-0",column:"",filter:""},{default:c(()=>[(x(!0),$(T,null,W(n.value.colors,(i,r)=>(x(),E(Z,{key:r,value:i,size:"large",color:"teal-lighten-1"},{default:c(()=>[P(D(i),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(B,{class:"mb-0 mb-sm-"},{default:c(()=>[kt,l(L,{size:"x-small",icon:"",variant:"text",color:"red",onClick:h[3]||(h[3]=i=>f(-1))},{default:c(()=>[l(q,null,{default:c(()=>[P("mdi-minus")]),_:1})]),_:1}),p("span",Vt,D(g.value),1),l(L,{size:"x-small",icon:"",variant:"text",color:"#039199",onClick:h[4]||(h[4]=i=>f(1))},{default:c(()=>[l(q,null,{default:c(()=>[P("mdi-plus")]),_:1})]),_:1})]),_:1}),l(B,{class:"py-0 d-flex align-end"},{default:c(()=>[l(qe,{class:"pa-0 w-100",justify:"center"},{default:c(()=>[l(L,{class:"addCart-btn",block:"",variant:"outlined",onClick:Y},{default:c(()=>[p("div",xt,[l(tt,{size:20})]),P(" 加入購物車 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(Ne,{class:"align-center justify-center","model-value":!n.value.sell,persistent:""},{default:c(()=>[Ct,l(k,{class:"no-sell-subtitle",to:"/products"},{default:c(()=>[P(" 逛逛其他商品 → ")]),_:1})]),_:1},8,["model-value"])],64)}}};typeof Q=="function"&&Q(he);const pt=je(he,[["__scopeId","data-v-4b326237"]]);export{pt as default};
